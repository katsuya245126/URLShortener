  [1m[35m (257.7ms)[0m  [1m[35mCREATE DATABASE "URLShortener_development" ENCODING = 'unicode'[0m
  [1m[35m (259.1ms)[0m  [1m[35mCREATE DATABASE "URLShortener_test" ENCODING = 'unicode'[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20200828071628)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200828071628"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-08-28 07:21:49.145052"], ["updated_at", "2020-08-28 07:21:49.145052"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "aaa"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "AAA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "AAA"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (8.6ms)[0m  [1m[35mTRUNCATE TABLE "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateShortenedUrls (20200828073211)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "shortened_urls" ("id" bigserial primary key, "user_id" integer NOT NULL, "long_url" character varying NOT NULL, "short_url" character varying NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_user_id" ON "shortened_urls"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200828073211"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Create (2.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("long_url", "short_url") VALUES ($1, $2) RETURNING "id"[0m  [["long_url", "123"], ["short_url", "1"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mShortenedUrl Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XU8nUffhUamSy4RDS-LYnQ"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "hCjYKFZXCBXLTqDOl-yLOg"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "dMSQcrrv50AcVAqLVzNmkg"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "a@a.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "a@a.com"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ini0i-bpmedzldf_x8Rb6A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Create (1.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 3], ["long_url", "adsfasdf"], ["short_url", "ini0i-bpmedzldf_x8Rb6A"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 3]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToShortUrl (20200829060407)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE  INDEX  "index_shortened_urls_on_short_url" ON "shortened_urls"  ("short_url")[0m
  [1m[36mprimary::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200829060407"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (9.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "aaa@gmail.com"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "bbb@gmail.com"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "ccc@gmail.com"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "BinL372VR12AwDBqqlid8Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 4], ["long_url", "11111111111111"], ["short_url", "BinL372VR12AwDBqqlid8Q"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "9qq29_Z0SU8JvrQ37Ptg8Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.9ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 4], ["long_url", "22222222222222"], ["short_url", "9qq29_Z0SU8JvrQ37Ptg8Q"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveIndexFromUserId (20200829061332)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP INDEX  "index_shortened_urls_on_user_id"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200829061332"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (13.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "aaa@gmail.com"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "bbb@gmail.com"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "ccc@gmail.com"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "z66Buht1FSrD5Y2VkkgvKw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 7], ["long_url", "11111111111111"], ["short_url", "z66Buht1FSrD5Y2VkkgvKw"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "JeD5Ah_tA4YZzv-692MQOQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 7], ["long_url", "22222222222222"], ["short_url", "JeD5Ah_tA4YZzv-692MQOQ"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ehYrONm8JSqVCvVNoGKLSw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 7], ["long_url", "33333333333333"], ["short_url", "ehYrONm8JSqVCvVNoGKLSw"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "JzHtM4_9VZUW98SDwQ1ilQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 8], ["long_url", "44444444444444"], ["short_url", "JzHtM4_9VZUW98SDwQ1ilQ"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "IV4PK6qaoRnTMuksdqzFdA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 8], ["long_url", "55555555555555"], ["short_url", "IV4PK6qaoRnTMuksdqzFdA"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "f2paG0ulimjLpNOywjMPMQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 8], ["long_url", "66666666666666"], ["short_url", "f2paG0ulimjLpNOywjMPMQ"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "H1D0iYITLHl5HJgz5_rggA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 9], ["long_url", "77777777777777"], ["short_url", "H1D0iYITLHl5HJgz5_rggA"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "lPUk2oc7wC50qusAZ3eapw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 9], ["long_url", "88888888888888"], ["short_url", "lPUk2oc7wC50qusAZ3eapw"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WUiLlagt8GPekAABrZmZoQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:15:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 9], ["long_url", "99999999999999"], ["short_url", "WUiLlagt8GPekAABrZmZoQ"]]
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:23:in `create_shortened_url'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVisits (20200829094445)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "visits" ("id" bigserial primary key, "user_id" integer NOT NULL, "short_url_id" integer NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_visits_on_user_id" ON "visits"  ("user_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_visits_on_short_url_id" ON "visits"  ("short_url_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200829094445"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTimeStampsToUser (20200829133245)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "user" ADD "created_at" timestamp NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTimeStampsToUser (20200829133245)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "created_at" timestamp NOT NULL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (20.0ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "visits"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTimeStampsToUser (20200829133245)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "created_at" timestamp NOT NULL[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200829133245"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTimeStampsToShortenedUrls (20200829133510)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ShortenedUrls" ADD "created_at" timestamp NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTimeStampsToShortenedUrls (20200829133510)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "shortened_urls" ADD "created_at" timestamp NOT NULL[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200829133510"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTimeStampsToVisits (20200831014801)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "visits" ADD "created_at" timestamp NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "visits" ADD "updated_at" timestamp NOT NULL[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831014801"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "Woohoo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["email", "Woohoo@gmail.com"], ["created_at", "2020-08-31 01:57:05.411185"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "LdsoQuKc0N6QzLJEjAv23A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.8ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["long_url", "asdfasldkf;asdlfj.com"], ["short_url", "LdsoQuKc0N6QzLJEjAv23A"], ["created_at", "2020-08-31 01:58:42.819218"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (15.8ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "visits"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddUpdatedAtColumnToUsersAndShortenedUrls (20200831020936)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "updated_at" timestamp NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "shortened_urls" ADD "updated_at" timestamp NOT NULL[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831020936"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 02:16:53.680249"], ["updated_at", "2020-08-31 02:16:53.680249"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 02:16:53.685961"], ["updated_at", "2020-08-31 02:16:53.685961"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 02:16:53.690919"], ["updated_at", "2020-08-31 02:16:53.690919"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "QA6HhLIJNeErMCUCSkKQmg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 11], ["long_url", "11111111111111"], ["short_url", "QA6HhLIJNeErMCUCSkKQmg"], ["created_at", "2020-08-31 02:16:53.709055"], ["updated_at", "2020-08-31 02:16:53.709055"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "95IB3bLSFh92qZlmv4h0AQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 11], ["long_url", "22222222222222"], ["short_url", "95IB3bLSFh92qZlmv4h0AQ"], ["created_at", "2020-08-31 02:16:53.715094"], ["updated_at", "2020-08-31 02:16:53.715094"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0I2Mem48Gvko4jAPp8HpRQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 11], ["long_url", "33333333333333"], ["short_url", "0I2Mem48Gvko4jAPp8HpRQ"], ["created_at", "2020-08-31 02:16:53.720396"], ["updated_at", "2020-08-31 02:16:53.720396"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3KaF_hu30J_ZDTYI-u8Vxg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 12], ["long_url", "44444444444444"], ["short_url", "3KaF_hu30J_ZDTYI-u8Vxg"], ["created_at", "2020-08-31 02:16:53.725751"], ["updated_at", "2020-08-31 02:16:53.725751"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "u_lMBzW-e9w75hEGqNX0kA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 12], ["long_url", "55555555555555"], ["short_url", "u_lMBzW-e9w75hEGqNX0kA"], ["created_at", "2020-08-31 02:16:53.730984"], ["updated_at", "2020-08-31 02:16:53.730984"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "e58EIyZcDeaUupbuGc0rfA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 12], ["long_url", "66666666666666"], ["short_url", "e58EIyZcDeaUupbuGc0rfA"], ["created_at", "2020-08-31 02:16:53.740775"], ["updated_at", "2020-08-31 02:16:53.740775"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "aVkswyn6HEbGlczCQdWAxQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 13], ["long_url", "77777777777777"], ["short_url", "aVkswyn6HEbGlczCQdWAxQ"], ["created_at", "2020-08-31 02:16:53.751539"], ["updated_at", "2020-08-31 02:16:53.751539"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ZZL1hKJFxT1vKOh-fT7I7Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 13], ["long_url", "88888888888888"], ["short_url", "ZZL1hKJFxT1vKOh-fT7I7Q"], ["created_at", "2020-08-31 02:16:53.756975"], ["updated_at", "2020-08-31 02:16:53.756975"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "BVenleT0MdQqOuzQLrpxEg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 13], ["long_url", "99999999999999"], ["short_url", "BVenleT0MdQqOuzQLrpxEg"], ["created_at", "2020-08-31 02:16:53.762426"], ["updated_at", "2020-08-31 02:16:53.762426"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (12.3ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "visits"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 02:21:13.901211"], ["updated_at", "2020-08-31 02:21:13.901211"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 02:21:13.908475"], ["updated_at", "2020-08-31 02:21:13.908475"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 02:21:13.913518"], ["updated_at", "2020-08-31 02:21:13.913518"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "T9Kd8FP78QJ2phiKcho49w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 14], ["long_url", "11111111111111"], ["short_url", "T9Kd8FP78QJ2phiKcho49w"], ["created_at", "2020-08-31 02:21:13.930077"], ["updated_at", "2020-08-31 02:21:13.930077"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WCI_gXVtAugaOjUtRI-PuQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 14], ["long_url", "22222222222222"], ["short_url", "WCI_gXVtAugaOjUtRI-PuQ"], ["created_at", "2020-08-31 02:21:13.936579"], ["updated_at", "2020-08-31 02:21:13.936579"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DkuciGWEUNoOJfOyKcic1A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 14], ["long_url", "33333333333333"], ["short_url", "DkuciGWEUNoOJfOyKcic1A"], ["created_at", "2020-08-31 02:21:13.942523"], ["updated_at", "2020-08-31 02:21:13.942523"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "9EeVMFkJnOMUzTc4MYZsgA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 15], ["long_url", "44444444444444"], ["short_url", "9EeVMFkJnOMUzTc4MYZsgA"], ["created_at", "2020-08-31 02:21:13.948440"], ["updated_at", "2020-08-31 02:21:13.948440"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "yst7yuKv3PWTIrVq3BgXbQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 15], ["long_url", "55555555555555"], ["short_url", "yst7yuKv3PWTIrVq3BgXbQ"], ["created_at", "2020-08-31 02:21:13.953757"], ["updated_at", "2020-08-31 02:21:13.953757"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_w3jd9FfSiQNDhTxZ7r-RQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 15], ["long_url", "66666666666666"], ["short_url", "_w3jd9FfSiQNDhTxZ7r-RQ"], ["created_at", "2020-08-31 02:21:13.959247"], ["updated_at", "2020-08-31 02:21:13.959247"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_yKv614rweEclqfyNij_Vg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 16], ["long_url", "77777777777777"], ["short_url", "_yKv614rweEclqfyNij_Vg"], ["created_at", "2020-08-31 02:21:13.969754"], ["updated_at", "2020-08-31 02:21:13.969754"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3mCO0sHdST5_RZlpVUBGuA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 16], ["long_url", "88888888888888"], ["short_url", "3mCO0sHdST5_RZlpVUBGuA"], ["created_at", "2020-08-31 02:21:13.975274"], ["updated_at", "2020-08-31 02:21:13.975274"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ROwliB5KiHI6WD1LNtl26Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 16], ["long_url", "99999999999999"], ["short_url", "ROwliB5KiHI6WD1LNtl26Q"], ["created_at", "2020-08-31 02:21:13.981623"], ["updated_at", "2020-08-31 02:21:13.981623"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.8ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 14], ["short_url_id", 27], ["created_at", "2020-08-31 02:21:13.990599"], ["updated_at", "2020-08-31 02:21:13.990599"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.9ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 14], ["short_url_id", 28], ["created_at", "2020-08-31 02:21:13.994639"], ["updated_at", "2020-08-31 02:21:13.994639"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveIndexFromVisitsColumns (20200831022258)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP INDEX  "index_visits_on_user_id"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP INDEX  "index_visits_on_short_url_id"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831022258"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToUsersAsPair (20200831022401)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_subscriptions_on_user_id_and_short_url_id" ON "subscriptions"  ("user_id", "short_url_id")[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToUsersAsPair (20200831022401)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_visits_on_user_id_and_short_url_id" ON "visits"  ("user_id", "short_url_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831022401"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (14.7ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "visits"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 02:24:57.749470"], ["updated_at", "2020-08-31 02:24:57.749470"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 02:24:57.757162"], ["updated_at", "2020-08-31 02:24:57.757162"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 02:24:57.762386"], ["updated_at", "2020-08-31 02:24:57.762386"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "wQ4bjm14IgaeO0VRfokJbg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 17], ["long_url", "11111111111111"], ["short_url", "wQ4bjm14IgaeO0VRfokJbg"], ["created_at", "2020-08-31 02:24:57.779417"], ["updated_at", "2020-08-31 02:24:57.779417"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "at3jcmSQaevjY7sMIsyFnw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 17], ["long_url", "22222222222222"], ["short_url", "at3jcmSQaevjY7sMIsyFnw"], ["created_at", "2020-08-31 02:24:57.786207"], ["updated_at", "2020-08-31 02:24:57.786207"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ru76ZhClXHbiseoXbbJeMA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 17], ["long_url", "33333333333333"], ["short_url", "ru76ZhClXHbiseoXbbJeMA"], ["created_at", "2020-08-31 02:24:57.792252"], ["updated_at", "2020-08-31 02:24:57.792252"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0moN1CBHE7NafQAknL2UuA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 18], ["long_url", "44444444444444"], ["short_url", "0moN1CBHE7NafQAknL2UuA"], ["created_at", "2020-08-31 02:24:57.798137"], ["updated_at", "2020-08-31 02:24:57.798137"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "tFPgj80Oy8S9boMdW3jlOA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 18], ["long_url", "55555555555555"], ["short_url", "tFPgj80Oy8S9boMdW3jlOA"], ["created_at", "2020-08-31 02:24:57.803599"], ["updated_at", "2020-08-31 02:24:57.803599"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "GSveUoj6Nw_AU0pTHhMVAw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 18], ["long_url", "66666666666666"], ["short_url", "GSveUoj6Nw_AU0pTHhMVAw"], ["created_at", "2020-08-31 02:24:57.814727"], ["updated_at", "2020-08-31 02:24:57.814727"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "RjmOfcmlQwgNfbxeBSoGlQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 19], ["long_url", "77777777777777"], ["short_url", "RjmOfcmlQwgNfbxeBSoGlQ"], ["created_at", "2020-08-31 02:24:57.829166"], ["updated_at", "2020-08-31 02:24:57.829166"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Imhu7YNwj-axH0t4BIctWQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 19], ["long_url", "88888888888888"], ["short_url", "Imhu7YNwj-axH0t4BIctWQ"], ["created_at", "2020-08-31 02:24:57.835276"], ["updated_at", "2020-08-31 02:24:57.835276"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "tV5K729XoXehiVxQhLmk5A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:17:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 19], ["long_url", "99999999999999"], ["short_url", "tV5K729XoXehiVxQhLmk5A"], ["created_at", "2020-08-31 02:24:57.841451"], ["updated_at", "2020-08-31 02:24:57.841451"]]
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:25:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.6ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 17], ["short_url_id", 36], ["created_at", "2020-08-31 02:24:57.850410"], ["updated_at", "2020-08-31 02:24:57.850410"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 17], ["short_url_id", 37], ["created_at", "2020-08-31 02:24:57.854928"], ["updated_at", "2020-08-31 02:24:57.854928"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 17], ["short_url_id", 38], ["created_at", "2020-08-31 02:24:57.858424"], ["updated_at", "2020-08-31 02:24:57.858424"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 18], ["short_url_id", 39], ["created_at", "2020-08-31 02:24:57.861951"], ["updated_at", "2020-08-31 02:24:57.861951"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 18], ["short_url_id", 40], ["created_at", "2020-08-31 02:24:57.865155"], ["updated_at", "2020-08-31 02:24:57.865155"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 18], ["short_url_id", 41], ["created_at", "2020-08-31 02:24:57.868790"], ["updated_at", "2020-08-31 02:24:57.868790"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 19], ["short_url_id", 33], ["created_at", "2020-08-31 02:24:57.871989"], ["updated_at", "2020-08-31 02:24:57.871989"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 19], ["short_url_id", 34], ["created_at", "2020-08-31 02:24:57.875004"], ["updated_at", "2020-08-31 02:24:57.875004"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 19], ["short_url_id", 35], ["created_at", "2020-08-31 02:24:57.877824"], ["updated_at", "2020-08-31 02:24:57.877824"]]
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:5:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mVisit Load (1.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 36]]
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (12.1ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "visits"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 02:48:47.279654"], ["updated_at", "2020-08-31 02:48:47.279654"]]
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 02:48:47.287034"], ["updated_at", "2020-08-31 02:48:47.287034"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 02:48:47.292189"], ["updated_at", "2020-08-31 02:48:47.292189"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "u1Uk1p0Ty-RAm2KnQMUXuQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 20], ["long_url", "11111111111111"], ["short_url", "u1Uk1p0Ty-RAm2KnQMUXuQ"], ["created_at", "2020-08-31 02:48:47.310236"], ["updated_at", "2020-08-31 02:48:47.310236"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rLxFqhzlTVOJIUBs4Pxx-w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 20], ["long_url", "22222222222222"], ["short_url", "rLxFqhzlTVOJIUBs4Pxx-w"], ["created_at", "2020-08-31 02:48:47.317183"], ["updated_at", "2020-08-31 02:48:47.317183"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "l-_RQeNO6LqnRQB7DOujjg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 20], ["long_url", "33333333333333"], ["short_url", "l-_RQeNO6LqnRQB7DOujjg"], ["created_at", "2020-08-31 02:48:47.323078"], ["updated_at", "2020-08-31 02:48:47.323078"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "RvtPtSS_AQbjNP4ZdZc6qg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.7ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["long_url", "44444444444444"], ["short_url", "RvtPtSS_AQbjNP4ZdZc6qg"], ["created_at", "2020-08-31 02:48:47.336180"], ["updated_at", "2020-08-31 02:48:47.336180"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "qbgohs39PZbnte60U-c-eQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.7ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["long_url", "55555555555555"], ["short_url", "qbgohs39PZbnte60U-c-eQ"], ["created_at", "2020-08-31 02:48:47.351847"], ["updated_at", "2020-08-31 02:48:47.351847"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "23KJvyH2rwVR8LC7TdVg7w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["long_url", "66666666666666"], ["short_url", "23KJvyH2rwVR8LC7TdVg7w"], ["created_at", "2020-08-31 02:48:47.375203"], ["updated_at", "2020-08-31 02:48:47.375203"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "wJZy7s52ccC98IAgprfs9Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 22], ["long_url", "77777777777777"], ["short_url", "wJZy7s52ccC98IAgprfs9Q"], ["created_at", "2020-08-31 02:48:47.382524"], ["updated_at", "2020-08-31 02:48:47.382524"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "wxEJpvOmkagYs0AjOFz3RA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 22], ["long_url", "88888888888888"], ["short_url", "wxEJpvOmkagYs0AjOFz3RA"], ["created_at", "2020-08-31 02:48:47.388421"], ["updated_at", "2020-08-31 02:48:47.388421"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0wC31ec9TrN-BdHz-xW22w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:19:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 22], ["long_url", "99999999999999"], ["short_url", "0wC31ec9TrN-BdHz-xW22w"], ["created_at", "2020-08-31 02:48:47.394079"], ["updated_at", "2020-08-31 02:48:47.394079"]]
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:27:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["short_url_id", 45], ["created_at", "2020-08-31 02:48:47.409179"], ["updated_at", "2020-08-31 02:48:47.409179"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["short_url_id", 46], ["created_at", "2020-08-31 02:48:47.415192"], ["updated_at", "2020-08-31 02:48:47.415192"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["short_url_id", 47], ["created_at", "2020-08-31 02:48:47.420866"], ["updated_at", "2020-08-31 02:48:47.420866"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 21], ["short_url_id", 48], ["created_at", "2020-08-31 02:48:47.427001"], ["updated_at", "2020-08-31 02:48:47.427001"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 21], ["short_url_id", 49], ["created_at", "2020-08-31 02:48:47.432709"], ["updated_at", "2020-08-31 02:48:47.432709"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 21], ["short_url_id", 50], ["created_at", "2020-08-31 02:48:47.438375"], ["updated_at", "2020-08-31 02:48:47.438375"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 22], ["short_url_id", 42], ["created_at", "2020-08-31 02:48:47.443854"], ["updated_at", "2020-08-31 02:48:47.443854"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 22], ["short_url_id", 43], ["created_at", "2020-08-31 02:48:47.449310"], ["updated_at", "2020-08-31 02:48:47.449310"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 22], ["short_url_id", 44], ["created_at", "2020-08-31 02:48:47.454646"], ["updated_at", "2020-08-31 02:48:47.454646"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "shortened_urls"."id" = "visits"."short_url_id" WHERE "visits"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."created_at" = $1[0m  [["created_at", "2020-08-30 04:01:50.921744"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."created_at" = $1[0m  [["created_at", "2020-08-31 03:52:28.382839"]]
  [1m[36mShortenedUrl Load (4.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "visits"."user_id") FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "visits"."user_id") FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 42]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1 AND "visits"."created_at" BETWEEN $2 AND $3[0m  [["short_url_id", 42], ["created_at", "2020-08-30 04:13:46.411804"], ["created_at", "2020-08-31 04:13:46.411911"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveIndexFromVisits (20200831041701)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP INDEX  "index_visits_on_user_id_and_short_url_id"[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831041701"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToVisitsNotUnique (20200831041833)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToVisitsNotUnique (20200831041833)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_visits_on_user_id" ON "visits"  ("user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_visits_on_short_url_id" ON "visits"  ("short_url_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831041833"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (11.1ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "visits"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 04:19:42.577422"], ["updated_at", "2020-08-31 04:19:42.577422"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 04:19:42.584805"], ["updated_at", "2020-08-31 04:19:42.584805"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 04:19:42.589353"], ["updated_at", "2020-08-31 04:19:42.589353"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "glshn8JlV_Mo8HGqhDHJHA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 23], ["long_url", "11111111111111"], ["short_url", "glshn8JlV_Mo8HGqhDHJHA"], ["created_at", "2020-08-31 04:19:42.607365"], ["updated_at", "2020-08-31 04:19:42.607365"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XUaMobhke4k_ff8pDDtLeg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 23], ["long_url", "22222222222222"], ["short_url", "XUaMobhke4k_ff8pDDtLeg"], ["created_at", "2020-08-31 04:19:42.613412"], ["updated_at", "2020-08-31 04:19:42.613412"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "l2Bx0j9PrGNQeqvpWPWn-w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 23], ["long_url", "33333333333333"], ["short_url", "l2Bx0j9PrGNQeqvpWPWn-w"], ["created_at", "2020-08-31 04:19:42.618420"], ["updated_at", "2020-08-31 04:19:42.618420"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-ZCzWb9vGw3vh2uj4jEHcA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 24], ["long_url", "44444444444444"], ["short_url", "-ZCzWb9vGw3vh2uj4jEHcA"], ["created_at", "2020-08-31 04:19:42.623523"], ["updated_at", "2020-08-31 04:19:42.623523"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_Xs7IAOow56Uh6wO42TgLw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 24], ["long_url", "55555555555555"], ["short_url", "_Xs7IAOow56Uh6wO42TgLw"], ["created_at", "2020-08-31 04:19:42.628927"], ["updated_at", "2020-08-31 04:19:42.628927"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bvjftD9makS3EbOCf1fxug"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 24], ["long_url", "66666666666666"], ["short_url", "bvjftD9makS3EbOCf1fxug"], ["created_at", "2020-08-31 04:19:42.639337"], ["updated_at", "2020-08-31 04:19:42.639337"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "5TPAPJqcxVFBhMir3dPGWw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 25], ["long_url", "77777777777777"], ["short_url", "5TPAPJqcxVFBhMir3dPGWw"], ["created_at", "2020-08-31 04:19:42.644689"], ["updated_at", "2020-08-31 04:19:42.644689"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "66zN0ApWJL9SgifuKhWudA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 25], ["long_url", "88888888888888"], ["short_url", "66zN0ApWJL9SgifuKhWudA"], ["created_at", "2020-08-31 04:19:42.649955"], ["updated_at", "2020-08-31 04:19:42.649955"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xxJxT2Hiae5gfTaiNAt5qg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 25], ["long_url", "99999999999999"], ["short_url", "xxJxT2Hiae5gfTaiNAt5qg"], ["created_at", "2020-08-31 04:19:42.654903"], ["updated_at", "2020-08-31 04:19:42.654903"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.6ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["short_url_id", 54], ["created_at", "2020-08-31 04:19:42.668719"], ["updated_at", "2020-08-31 04:19:42.668719"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["short_url_id", 55], ["created_at", "2020-08-31 04:19:42.674802"], ["updated_at", "2020-08-31 04:19:42.674802"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["short_url_id", 56], ["created_at", "2020-08-31 04:19:42.685153"], ["updated_at", "2020-08-31 04:19:42.685153"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["short_url_id", 57], ["created_at", "2020-08-31 04:19:42.692951"], ["updated_at", "2020-08-31 04:19:42.692951"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["short_url_id", 58], ["created_at", "2020-08-31 04:19:42.699037"], ["updated_at", "2020-08-31 04:19:42.699037"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["short_url_id", 59], ["created_at", "2020-08-31 04:19:42.705091"], ["updated_at", "2020-08-31 04:19:42.705091"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["short_url_id", 51], ["created_at", "2020-08-31 04:19:42.710330"], ["updated_at", "2020-08-31 04:19:42.710330"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["short_url_id", 52], ["created_at", "2020-08-31 04:19:42.715487"], ["updated_at", "2020-08-31 04:19:42.715487"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["short_url_id", 53], ["created_at", "2020-08-31 04:19:42.721341"], ["updated_at", "2020-08-31 04:19:42.721341"]]
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:11:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT DISTINCT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "shortened_urls"."id" = "visits"."short_url_id" WHERE "visits"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 24]]
  [1m[36mVisit Load (1.0ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."user_id" = $1[0m  [["user_id", 24]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT DISTINCT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "shortened_urls"."id" = "visits"."short_url_id" WHERE "visits"."user_id" = $1[0m  [["user_id", 24]]
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Y8ZNymFERUGQQ-8uAr6oXQ"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 24], ["long_url", "POOPOOPEEPEE"], ["short_url", "Y8ZNymFERUGQQ-8uAr6oXQ"], ["created_at", "2020-08-31 04:26:26.305581"], ["updated_at", "2020-08-31 04:26:26.305581"]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT DISTINCT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1 AND "visits"."created_at" BETWEEN $2 AND $3[0m  [["short_url_id", 60], ["created_at", "2020-08-30 04:27:11.148276"], ["created_at", "2020-08-31 04:27:11.148808"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["short_url_id", 60], ["created_at", "2020-08-31 04:27:46.907253"], ["updated_at", "2020-08-31 04:27:46.907253"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT DISTINCT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 60]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mVisit Create (0.7ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["short_url_id", 51], ["created_at", "2020-08-31 04:31:16.348517"], ["updated_at", "2020-08-31 04:31:16.348517"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1 AND "visits"."created_at" BETWEEN $2 AND $3[0m  [["short_url_id", 51], ["created_at", "2020-08-30 04:32:04.529127"], ["created_at", "2020-08-31 04:32:04.529690"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["short_url_id", 51], ["created_at", "2020-08-30 04:33:03.475778"], ["created_at", "2020-08-31 04:33:03.476022"]]
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["short_url_id", 51], ["created_at", "2020-08-31 04:34:24.676778"], ["updated_at", "2020-08-31 04:34:24.676778"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["short_url_id", 51], ["created_at", "2020-08-30 04:34:45.186012"], ["created_at", "2020-08-31 04:34:45.186233"]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT DISTINCT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT DISTINCT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 51]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["short_url_id", 51], ["created_at", "2020-08-30 04:35:59.942935"], ["created_at", "2020-08-31 04:35:59.943550"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@aaa.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@aaa.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@aaa.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "a"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Xx2Zdm7pYTZ2pkFXue85rQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:22:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 23], ["long_url", "4chan.org"], ["short_url", "Xx2Zdm7pYTZ2pkFXue85rQ"], ["created_at", "2020-08-31 04:59:55.992024"], ["updated_at", "2020-08-31 04:59:55.992024"]]
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:30:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "R8ZIq1s0Yee41itgnIakZA"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KDERFc2GO_8GDIAFZkP8Dw"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Xx2Zdm7pYTZ2pkFXue85rQ"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "a"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTaggings (20200831060532)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "short_url_id" integer NOT NULL, "tag_topic_id" integer NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_short_url_id" ON "taggings"  ("short_url_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_tag_topic_id" ON "taggings"  ("tag_topic_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831060532"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTagTopicsTable (20200831061825)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "tag_topics" ("id" bigserial primary key, "short_url_id" integer NOT NULL, "topic" character varying NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_tag_topics_on_short_url_id" ON "tag_topics"  ("short_url_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831061825"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["short_url_id", 54], ["created_at", "2020-08-31 06:30:27.280351"], ["updated_at", "2020-08-31 06:30:27.280351"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveShortUrlIdFromTagTopics (20200831064400)
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "tag_topics" DROP COLUMN "short_url_id"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831064400"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveIndexFromTaggings (20200831064614)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP INDEX  "index_taggings_on_tag_topic_id"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP INDEX  "index_taggings_on_short_url_id"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831064614"]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexPairToTaggings (20200831064740)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_taggings_on_tag_topic_id_and_short_url_id" ON "taggings"  ("tag_topic_id", "short_url_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200831064740"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (23.2ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 06:53:00.566545"], ["updated_at", "2020-08-31 06:53:00.566545"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 06:53:00.572335"], ["updated_at", "2020-08-31 06:53:00.572335"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 06:53:00.577494"], ["updated_at", "2020-08-31 06:53:00.577494"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YKLlZiCeERN23yOaLH0YRw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 26], ["long_url", "11111111111111"], ["short_url", "YKLlZiCeERN23yOaLH0YRw"], ["created_at", "2020-08-31 06:53:00.597063"], ["updated_at", "2020-08-31 06:53:00.597063"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Bk-WcT8kAOyMm8iQFHk4-Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 26], ["long_url", "22222222222222"], ["short_url", "Bk-WcT8kAOyMm8iQFHk4-Q"], ["created_at", "2020-08-31 06:53:00.603109"], ["updated_at", "2020-08-31 06:53:00.603109"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "TJViiSZqpBsCdrCmnZ__hg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 26], ["long_url", "33333333333333"], ["short_url", "TJViiSZqpBsCdrCmnZ__hg"], ["created_at", "2020-08-31 06:53:00.608701"], ["updated_at", "2020-08-31 06:53:00.608701"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "oMRNLhrXJfVjVwoTZ7JhFg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 27], ["long_url", "44444444444444"], ["short_url", "oMRNLhrXJfVjVwoTZ7JhFg"], ["created_at", "2020-08-31 06:53:00.614422"], ["updated_at", "2020-08-31 06:53:00.614422"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "vS7XHYuyFosy5fttS2u2rg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 27], ["long_url", "55555555555555"], ["short_url", "vS7XHYuyFosy5fttS2u2rg"], ["created_at", "2020-08-31 06:53:00.625284"], ["updated_at", "2020-08-31 06:53:00.625284"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "C7ibTnFVJC7P_Z211i3V5A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 27], ["long_url", "66666666666666"], ["short_url", "C7ibTnFVJC7P_Z211i3V5A"], ["created_at", "2020-08-31 06:53:00.630869"], ["updated_at", "2020-08-31 06:53:00.630869"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "J7FcfBPxQEB9WzGUwOUQ6g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 28], ["long_url", "77777777777777"], ["short_url", "J7FcfBPxQEB9WzGUwOUQ6g"], ["created_at", "2020-08-31 06:53:00.636453"], ["updated_at", "2020-08-31 06:53:00.636453"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "22kW8dMeFcyEfn3-C74m2g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 28], ["long_url", "88888888888888"], ["short_url", "22kW8dMeFcyEfn3-C74m2g"], ["created_at", "2020-08-31 06:53:00.641847"], ["updated_at", "2020-08-31 06:53:00.641847"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1w-AjGoG6zrTSA5-yxIAwg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 28], ["long_url", "99999999999999"], ["short_url", "1w-AjGoG6zrTSA5-yxIAwg"], ["created_at", "2020-08-31 06:53:00.647774"], ["updated_at", "2020-08-31 06:53:00.647774"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 26], ["short_url_id", 65], ["created_at", "2020-08-31 06:53:00.662062"], ["updated_at", "2020-08-31 06:53:00.662062"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 26], ["short_url_id", 66], ["created_at", "2020-08-31 06:53:00.668149"], ["updated_at", "2020-08-31 06:53:00.668149"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 26], ["short_url_id", 67], ["created_at", "2020-08-31 06:53:00.673786"], ["updated_at", "2020-08-31 06:53:00.673786"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 27], ["short_url_id", 68], ["created_at", "2020-08-31 06:53:00.679065"], ["updated_at", "2020-08-31 06:53:00.679065"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 27], ["short_url_id", 69], ["created_at", "2020-08-31 06:53:00.684327"], ["updated_at", "2020-08-31 06:53:00.684327"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 27], ["short_url_id", 70], ["created_at", "2020-08-31 06:53:00.689829"], ["updated_at", "2020-08-31 06:53:00.689829"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 28], ["short_url_id", 62], ["created_at", "2020-08-31 06:53:00.695101"], ["updated_at", "2020-08-31 06:53:00.695101"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 28], ["short_url_id", 63], ["created_at", "2020-08-31 06:53:00.700872"], ["updated_at", "2020-08-31 06:53:00.700872"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 28], ["short_url_id", 64], ["created_at", "2020-08-31 06:53:00.706308"], ["updated_at", "2020-08-31 06:53:00.706308"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (19.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 06:53:43.005408"], ["updated_at", "2020-08-31 06:53:43.005408"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 06:53:43.012058"], ["updated_at", "2020-08-31 06:53:43.012058"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 06:53:43.023172"], ["updated_at", "2020-08-31 06:53:43.023172"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "iQHW_3LPIoNF1UpD5uDOYw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 29], ["long_url", "11111111111111"], ["short_url", "iQHW_3LPIoNF1UpD5uDOYw"], ["created_at", "2020-08-31 06:53:43.056141"], ["updated_at", "2020-08-31 06:53:43.056141"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rlikWyPCCecV_UaPMJbZUw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 29], ["long_url", "22222222222222"], ["short_url", "rlikWyPCCecV_UaPMJbZUw"], ["created_at", "2020-08-31 06:53:43.062642"], ["updated_at", "2020-08-31 06:53:43.062642"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ly0qAacAOzkbNuLD5CGsIw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.6ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 29], ["long_url", "33333333333333"], ["short_url", "ly0qAacAOzkbNuLD5CGsIw"], ["created_at", "2020-08-31 06:53:43.072503"], ["updated_at", "2020-08-31 06:53:43.072503"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0H7mxKopo-gJJb8JXg0viA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.6ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 30], ["long_url", "44444444444444"], ["short_url", "0H7mxKopo-gJJb8JXg0viA"], ["created_at", "2020-08-31 06:53:43.084837"], ["updated_at", "2020-08-31 06:53:43.084837"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-n0gjflrXNLkDHMGSu-8UA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.6ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 30], ["long_url", "55555555555555"], ["short_url", "-n0gjflrXNLkDHMGSu-8UA"], ["created_at", "2020-08-31 06:53:43.108426"], ["updated_at", "2020-08-31 06:53:43.108426"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "9y1U4TqHnt-zkeIrhlvnsw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 30], ["long_url", "66666666666666"], ["short_url", "9y1U4TqHnt-zkeIrhlvnsw"], ["created_at", "2020-08-31 06:53:43.118875"], ["updated_at", "2020-08-31 06:53:43.118875"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "jOumBk4LMmda4kQqbgAkjQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 31], ["long_url", "77777777777777"], ["short_url", "jOumBk4LMmda4kQqbgAkjQ"], ["created_at", "2020-08-31 06:53:43.126111"], ["updated_at", "2020-08-31 06:53:43.126111"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "B1496wMiFYdyDHgL0KzO9g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 31], ["long_url", "88888888888888"], ["short_url", "B1496wMiFYdyDHgL0KzO9g"], ["created_at", "2020-08-31 06:53:43.132202"], ["updated_at", "2020-08-31 06:53:43.132202"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "qf9KUblZPRzXAUTmfc5rAw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.6ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 31], ["long_url", "99999999999999"], ["short_url", "qf9KUblZPRzXAUTmfc5rAw"], ["created_at", "2020-08-31 06:53:43.142492"], ["updated_at", "2020-08-31 06:53:43.142492"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.8ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 29], ["short_url_id", 74], ["created_at", "2020-08-31 06:53:43.175512"], ["updated_at", "2020-08-31 06:53:43.175512"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 29], ["short_url_id", 75], ["created_at", "2020-08-31 06:53:43.184242"], ["updated_at", "2020-08-31 06:53:43.184242"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 29], ["short_url_id", 76], ["created_at", "2020-08-31 06:53:43.190989"], ["updated_at", "2020-08-31 06:53:43.190989"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 30], ["short_url_id", 77], ["created_at", "2020-08-31 06:53:43.197345"], ["updated_at", "2020-08-31 06:53:43.197345"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 30], ["short_url_id", 78], ["created_at", "2020-08-31 06:53:43.203630"], ["updated_at", "2020-08-31 06:53:43.203630"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 30], ["short_url_id", 79], ["created_at", "2020-08-31 06:53:43.209534"], ["updated_at", "2020-08-31 06:53:43.209534"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 31], ["short_url_id", 71], ["created_at", "2020-08-31 06:53:43.214992"], ["updated_at", "2020-08-31 06:53:43.214992"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 31], ["short_url_id", 72], ["created_at", "2020-08-31 06:53:43.220568"], ["updated_at", "2020-08-31 06:53:43.220568"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 31], ["short_url_id", 73], ["created_at", "2020-08-31 06:53:43.226302"], ["updated_at", "2020-08-31 06:53:43.226302"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (22.3ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 06:54:21.242478"], ["updated_at", "2020-08-31 06:54:21.242478"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 06:54:21.247679"], ["updated_at", "2020-08-31 06:54:21.247679"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 06:54:21.252506"], ["updated_at", "2020-08-31 06:54:21.252506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DGRkdXlXZSrZv-E-p5NydA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 32], ["long_url", "11111111111111"], ["short_url", "DGRkdXlXZSrZv-E-p5NydA"], ["created_at", "2020-08-31 06:54:21.270872"], ["updated_at", "2020-08-31 06:54:21.270872"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_9yDzoPfr53so0mulIZLaw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 32], ["long_url", "22222222222222"], ["short_url", "_9yDzoPfr53so0mulIZLaw"], ["created_at", "2020-08-31 06:54:21.276997"], ["updated_at", "2020-08-31 06:54:21.276997"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sLvH5wRGkjfufV5TKnQcAQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 32], ["long_url", "33333333333333"], ["short_url", "sLvH5wRGkjfufV5TKnQcAQ"], ["created_at", "2020-08-31 06:54:21.282813"], ["updated_at", "2020-08-31 06:54:21.282813"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3tXskyUfLQa7vU_G3uNshw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 33], ["long_url", "44444444444444"], ["short_url", "3tXskyUfLQa7vU_G3uNshw"], ["created_at", "2020-08-31 06:54:21.288788"], ["updated_at", "2020-08-31 06:54:21.288788"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "RLcgcAgD4sYXvP85fMR3YA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 33], ["long_url", "55555555555555"], ["short_url", "RLcgcAgD4sYXvP85fMR3YA"], ["created_at", "2020-08-31 06:54:21.300088"], ["updated_at", "2020-08-31 06:54:21.300088"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "X23eiKirpbxSE4udgTtcJw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 33], ["long_url", "66666666666666"], ["short_url", "X23eiKirpbxSE4udgTtcJw"], ["created_at", "2020-08-31 06:54:21.305858"], ["updated_at", "2020-08-31 06:54:21.305858"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Rpwmz9ImjGMdyNh_rVGPbA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 34], ["long_url", "77777777777777"], ["short_url", "Rpwmz9ImjGMdyNh_rVGPbA"], ["created_at", "2020-08-31 06:54:21.311152"], ["updated_at", "2020-08-31 06:54:21.311152"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "k-v0gcXQygS7GRx7qAgNqQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 34], ["long_url", "88888888888888"], ["short_url", "k-v0gcXQygS7GRx7qAgNqQ"], ["created_at", "2020-08-31 06:54:21.316518"], ["updated_at", "2020-08-31 06:54:21.316518"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KIkZRgrqm6HX8t1yrj8jOg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 34], ["long_url", "99999999999999"], ["short_url", "KIkZRgrqm6HX8t1yrj8jOg"], ["created_at", "2020-08-31 06:54:21.322299"], ["updated_at", "2020-08-31 06:54:21.322299"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 32], ["short_url_id", 83], ["created_at", "2020-08-31 06:54:21.336204"], ["updated_at", "2020-08-31 06:54:21.336204"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 32], ["short_url_id", 84], ["created_at", "2020-08-31 06:54:21.342598"], ["updated_at", "2020-08-31 06:54:21.342598"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 32], ["short_url_id", 85], ["created_at", "2020-08-31 06:54:21.348246"], ["updated_at", "2020-08-31 06:54:21.348246"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 33], ["short_url_id", 86], ["created_at", "2020-08-31 06:54:21.353991"], ["updated_at", "2020-08-31 06:54:21.353991"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 33], ["short_url_id", 87], ["created_at", "2020-08-31 06:54:21.359355"], ["updated_at", "2020-08-31 06:54:21.359355"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 33], ["short_url_id", 88], ["created_at", "2020-08-31 06:54:21.364546"], ["updated_at", "2020-08-31 06:54:21.364546"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 34], ["short_url_id", 80], ["created_at", "2020-08-31 06:54:21.370154"], ["updated_at", "2020-08-31 06:54:21.370154"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 34], ["short_url_id", 81], ["created_at", "2020-08-31 06:54:21.376099"], ["updated_at", "2020-08-31 06:54:21.376099"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 34], ["short_url_id", 82], ["created_at", "2020-08-31 06:54:21.381571"], ["updated_at", "2020-08-31 06:54:21.381571"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (16.3ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 06:56:54.453700"], ["updated_at", "2020-08-31 06:56:54.453700"]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 06:56:54.461350"], ["updated_at", "2020-08-31 06:56:54.461350"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 06:56:54.466771"], ["updated_at", "2020-08-31 06:56:54.466771"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "jqSn-lh1YpjGW8RTyHK31g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 35], ["long_url", "11111111111111"], ["short_url", "jqSn-lh1YpjGW8RTyHK31g"], ["created_at", "2020-08-31 06:56:54.485731"], ["updated_at", "2020-08-31 06:56:54.485731"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-JaKrBg665uCszA7eIPKxA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 35], ["long_url", "22222222222222"], ["short_url", "-JaKrBg665uCszA7eIPKxA"], ["created_at", "2020-08-31 06:56:54.492189"], ["updated_at", "2020-08-31 06:56:54.492189"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "QTCtwlXq0svjaHPhKBLlcg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 35], ["long_url", "33333333333333"], ["short_url", "QTCtwlXq0svjaHPhKBLlcg"], ["created_at", "2020-08-31 06:56:54.498267"], ["updated_at", "2020-08-31 06:56:54.498267"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "PuQmEX25lY5VU8lcC837Zg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 36], ["long_url", "44444444444444"], ["short_url", "PuQmEX25lY5VU8lcC837Zg"], ["created_at", "2020-08-31 06:56:54.504106"], ["updated_at", "2020-08-31 06:56:54.504106"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_-Zq1Qaj-qBCYBMT4CgF7g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 36], ["long_url", "55555555555555"], ["short_url", "_-Zq1Qaj-qBCYBMT4CgF7g"], ["created_at", "2020-08-31 06:56:54.515727"], ["updated_at", "2020-08-31 06:56:54.515727"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SOty18NotIA_5ZgSWxPScQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 36], ["long_url", "66666666666666"], ["short_url", "SOty18NotIA_5ZgSWxPScQ"], ["created_at", "2020-08-31 06:56:54.521643"], ["updated_at", "2020-08-31 06:56:54.521643"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Z_dNddb4aSNjkWie2I7NIg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 37], ["long_url", "77777777777777"], ["short_url", "Z_dNddb4aSNjkWie2I7NIg"], ["created_at", "2020-08-31 06:56:54.527195"], ["updated_at", "2020-08-31 06:56:54.527195"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "jklQh-fh71EoaiH43IKO5w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 37], ["long_url", "88888888888888"], ["short_url", "jklQh-fh71EoaiH43IKO5w"], ["created_at", "2020-08-31 06:56:54.532400"], ["updated_at", "2020-08-31 06:56:54.532400"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3DSuf2wv1SdmAn1BNagIfg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 37], ["long_url", "99999999999999"], ["short_url", "3DSuf2wv1SdmAn1BNagIfg"], ["created_at", "2020-08-31 06:56:54.537878"], ["updated_at", "2020-08-31 06:56:54.537878"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.6ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 35], ["short_url_id", 92], ["created_at", "2020-08-31 06:56:54.553082"], ["updated_at", "2020-08-31 06:56:54.553082"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 35], ["short_url_id", 93], ["created_at", "2020-08-31 06:56:54.559969"], ["updated_at", "2020-08-31 06:56:54.559969"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 35], ["short_url_id", 94], ["created_at", "2020-08-31 06:56:54.565864"], ["updated_at", "2020-08-31 06:56:54.565864"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 36], ["short_url_id", 95], ["created_at", "2020-08-31 06:56:54.571272"], ["updated_at", "2020-08-31 06:56:54.571272"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 36], ["short_url_id", 96], ["created_at", "2020-08-31 06:56:54.576668"], ["updated_at", "2020-08-31 06:56:54.576668"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 97], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 36], ["short_url_id", 97], ["created_at", "2020-08-31 06:56:54.581962"], ["updated_at", "2020-08-31 06:56:54.581962"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 37], ["short_url_id", 89], ["created_at", "2020-08-31 06:56:54.587373"], ["updated_at", "2020-08-31 06:56:54.587373"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 37], ["short_url_id", 90], ["created_at", "2020-08-31 06:56:54.593130"], ["updated_at", "2020-08-31 06:56:54.593130"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 37], ["short_url_id", 91], ["created_at", "2020-08-31 06:56:54.598541"], ["updated_at", "2020-08-31 06:56:54.598541"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (19.3ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 07:01:23.726833"], ["updated_at", "2020-08-31 07:01:23.726833"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 07:01:23.733188"], ["updated_at", "2020-08-31 07:01:23.733188"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 07:01:23.738413"], ["updated_at", "2020-08-31 07:01:23.738413"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "j0Tj2ovcw7A_O1OXbxJLEA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 38], ["long_url", "11111111111111"], ["short_url", "j0Tj2ovcw7A_O1OXbxJLEA"], ["created_at", "2020-08-31 07:01:23.757027"], ["updated_at", "2020-08-31 07:01:23.757027"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "7PJrtiFhJVuJcNnpcB6hYQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 38], ["long_url", "22222222222222"], ["short_url", "7PJrtiFhJVuJcNnpcB6hYQ"], ["created_at", "2020-08-31 07:01:23.762400"], ["updated_at", "2020-08-31 07:01:23.762400"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ocTJ-iMIPK5lNvYA6Oh89A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 38], ["long_url", "33333333333333"], ["short_url", "ocTJ-iMIPK5lNvYA6Oh89A"], ["created_at", "2020-08-31 07:01:23.768075"], ["updated_at", "2020-08-31 07:01:23.768075"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-xCRUXceHQcLvTHGXXMBgg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 39], ["long_url", "44444444444444"], ["short_url", "-xCRUXceHQcLvTHGXXMBgg"], ["created_at", "2020-08-31 07:01:23.779659"], ["updated_at", "2020-08-31 07:01:23.779659"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "50l8JPjNBow-YggzWWJz2A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 39], ["long_url", "55555555555555"], ["short_url", "50l8JPjNBow-YggzWWJz2A"], ["created_at", "2020-08-31 07:01:23.784767"], ["updated_at", "2020-08-31 07:01:23.784767"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rnaZxrP5_Rf0_1pfRrwagg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 39], ["long_url", "66666666666666"], ["short_url", "rnaZxrP5_Rf0_1pfRrwagg"], ["created_at", "2020-08-31 07:01:23.789748"], ["updated_at", "2020-08-31 07:01:23.789748"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "nvz_TeA8RmUfmVecENX3Sg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 40], ["long_url", "77777777777777"], ["short_url", "nvz_TeA8RmUfmVecENX3Sg"], ["created_at", "2020-08-31 07:01:23.794820"], ["updated_at", "2020-08-31 07:01:23.794820"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FEXrqccERrjDMFNiS2FnQw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 40], ["long_url", "88888888888888"], ["short_url", "FEXrqccERrjDMFNiS2FnQw"], ["created_at", "2020-08-31 07:01:23.799641"], ["updated_at", "2020-08-31 07:01:23.799641"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "zsElgJbwEmbs8r-PuofWyA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 40], ["long_url", "99999999999999"], ["short_url", "zsElgJbwEmbs8r-PuofWyA"], ["created_at", "2020-08-31 07:01:23.804752"], ["updated_at", "2020-08-31 07:01:23.804752"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 38], ["short_url_id", 101], ["created_at", "2020-08-31 07:01:23.818731"], ["updated_at", "2020-08-31 07:01:23.818731"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 38], ["short_url_id", 102], ["created_at", "2020-08-31 07:01:23.825002"], ["updated_at", "2020-08-31 07:01:23.825002"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (1.7ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 38], ["short_url_id", 103], ["created_at", "2020-08-31 07:01:23.830840"], ["updated_at", "2020-08-31 07:01:23.830840"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 39], ["short_url_id", 104], ["created_at", "2020-08-31 07:01:23.837633"], ["updated_at", "2020-08-31 07:01:23.837633"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 105], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 39], ["short_url_id", 105], ["created_at", "2020-08-31 07:01:23.843420"], ["updated_at", "2020-08-31 07:01:23.843420"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 39], ["short_url_id", 106], ["created_at", "2020-08-31 07:01:23.848986"], ["updated_at", "2020-08-31 07:01:23.848986"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 98], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 40], ["short_url_id", 98], ["created_at", "2020-08-31 07:01:23.854565"], ["updated_at", "2020-08-31 07:01:23.854565"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 40], ["short_url_id", 99], ["created_at", "2020-08-31 07:01:23.859895"], ["updated_at", "2020-08-31 07:01:23.859895"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 40], ["short_url_id", 100], ["created_at", "2020-08-31 07:01:23.865285"], ["updated_at", "2020-08-31 07:01:23.865285"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 98], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (18.6ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-08-31 07:02:17.161721"], ["updated_at", "2020-08-31 07:02:17.161721"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-08-31 07:02:17.167402"], ["updated_at", "2020-08-31 07:02:17.167402"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-08-31 07:02:17.172641"], ["updated_at", "2020-08-31 07:02:17.172641"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FZIiDmI8HsfiVHb37ZEmkA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 41], ["long_url", "11111111111111"], ["short_url", "FZIiDmI8HsfiVHb37ZEmkA"], ["created_at", "2020-08-31 07:02:17.191556"], ["updated_at", "2020-08-31 07:02:17.191556"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "q3GTGZnnV9IsisAG2Q_Eaw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 41], ["long_url", "22222222222222"], ["short_url", "q3GTGZnnV9IsisAG2Q_Eaw"], ["created_at", "2020-08-31 07:02:17.197604"], ["updated_at", "2020-08-31 07:02:17.197604"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DguyIPB6UE8B9pt2mMxNWw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 41], ["long_url", "33333333333333"], ["short_url", "DguyIPB6UE8B9pt2mMxNWw"], ["created_at", "2020-08-31 07:02:17.203172"], ["updated_at", "2020-08-31 07:02:17.203172"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1o_55Z1HUnC0aHaWc1mdtw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 42], ["long_url", "44444444444444"], ["short_url", "1o_55Z1HUnC0aHaWc1mdtw"], ["created_at", "2020-08-31 07:02:17.214151"], ["updated_at", "2020-08-31 07:02:17.214151"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "MvTnPvfO2mOog4Yy1da7lA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 42], ["long_url", "55555555555555"], ["short_url", "MvTnPvfO2mOog4Yy1da7lA"], ["created_at", "2020-08-31 07:02:17.219759"], ["updated_at", "2020-08-31 07:02:17.219759"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-yNJ2HwdyxVzJjGivZWKSQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 42], ["long_url", "66666666666666"], ["short_url", "-yNJ2HwdyxVzJjGivZWKSQ"], ["created_at", "2020-08-31 07:02:17.225208"], ["updated_at", "2020-08-31 07:02:17.225208"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "AdNARL-T2seVUXAN8WKwPg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 43], ["long_url", "77777777777777"], ["short_url", "AdNARL-T2seVUXAN8WKwPg"], ["created_at", "2020-08-31 07:02:17.230618"], ["updated_at", "2020-08-31 07:02:17.230618"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XAILo5paVKEEHhBz52SX9Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 43], ["long_url", "88888888888888"], ["short_url", "XAILo5paVKEEHhBz52SX9Q"], ["created_at", "2020-08-31 07:02:17.235875"], ["updated_at", "2020-08-31 07:02:17.235875"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "maEomhh01QnHk_6GkoQm1w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 43], ["long_url", "99999999999999"], ["short_url", "maEomhh01QnHk_6GkoQm1w"], ["created_at", "2020-08-31 07:02:17.241051"], ["updated_at", "2020-08-31 07:02:17.241051"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 110], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 41], ["short_url_id", 110], ["created_at", "2020-08-31 07:02:17.255152"], ["updated_at", "2020-08-31 07:02:17.255152"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 111], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 41], ["short_url_id", 111], ["created_at", "2020-08-31 07:02:17.261102"], ["updated_at", "2020-08-31 07:02:17.261102"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 41], ["short_url_id", 112], ["created_at", "2020-08-31 07:02:17.267069"], ["updated_at", "2020-08-31 07:02:17.267069"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 42], ["short_url_id", 113], ["created_at", "2020-08-31 07:02:17.272605"], ["updated_at", "2020-08-31 07:02:17.272605"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 114], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 42], ["short_url_id", 114], ["created_at", "2020-08-31 07:02:17.277811"], ["updated_at", "2020-08-31 07:02:17.277811"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 115], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 42], ["short_url_id", 115], ["created_at", "2020-08-31 07:02:17.283310"], ["updated_at", "2020-08-31 07:02:17.283310"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 43], ["short_url_id", 107], ["created_at", "2020-08-31 07:02:17.288826"], ["updated_at", "2020-08-31 07:02:17.288826"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 43], ["short_url_id", 108], ["created_at", "2020-08-31 07:02:17.294284"], ["updated_at", "2020-08-31 07:02:17.294284"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 43], ["short_url_id", 109], ["created_at", "2020-08-31 07:02:17.299800"], ["updated_at", "2020-08-31 07:02:17.299800"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.4ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 107], ["tag_topic_id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.4ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 110], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 110], ["tag_topic_id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 113], ["tag_topic_id", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 108], ["tag_topic_id", 2]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 111], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 111], ["tag_topic_id", 2]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 114], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 114], ["tag_topic_id", 2]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 109], ["tag_topic_id", 3]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 112], ["tag_topic_id", 3]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 115], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 115], ["tag_topic_id", 3]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTagging Load (0.3ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" ORDER BY "taggings"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.8ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagging Load (0.3ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT short_url, long_url, COUNT(visit.id) AS number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT short_url, long_url, COUNT(visits.id) AS number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT short_url, long_url, COUNT(visits.id) AS number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url"[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (5.4ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT short_url, long_url, COUNT(visits.id) AS number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT short_url, long_url, COUNT(visits.id) AS number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.5ms)[0m  [1m[34mSELECT short_url, long_url, COUNT(visits.id) AS number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY visits.id[0m  [["tag_topic_id", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY visits.id LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (8.9ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY visits.id[0m  [["tag_topic_id", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY visits.id LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url"[0m  [["tag_topic_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT id, long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT id, long_url, short_url, COUNT(visits.id) AS num_of_visits FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."short_url_id" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "taggings"."tag_topic_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" LIMIT $2[0m  [["tag_topic_id", 1], ["LIMIT", 5]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (17.8ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 01:18:26.797775"], ["updated_at", "2020-09-01 01:18:26.797775"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 01:18:26.804329"], ["updated_at", "2020-09-01 01:18:26.804329"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 01:18:26.809417"], ["updated_at", "2020-09-01 01:18:26.809417"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "z2R4U7eyPp6mHDGoC0pvwA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 44], ["long_url", "11111111111111"], ["short_url", "z2R4U7eyPp6mHDGoC0pvwA"], ["created_at", "2020-09-01 01:18:26.828531"], ["updated_at", "2020-09-01 01:18:26.828531"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1vyWcS-6lajdFVVCDlK-sA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 44], ["long_url", "22222222222222"], ["short_url", "1vyWcS-6lajdFVVCDlK-sA"], ["created_at", "2020-09-01 01:18:26.834639"], ["updated_at", "2020-09-01 01:18:26.834639"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Ew9wgVC2aVT0suxIOnCIxQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 44], ["long_url", "33333333333333"], ["short_url", "Ew9wgVC2aVT0suxIOnCIxQ"], ["created_at", "2020-09-01 01:18:26.839782"], ["updated_at", "2020-09-01 01:18:26.839782"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "JxHSubhcCYyY9EYNOcoHZg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 45], ["long_url", "44444444444444"], ["short_url", "JxHSubhcCYyY9EYNOcoHZg"], ["created_at", "2020-09-01 01:18:26.850541"], ["updated_at", "2020-09-01 01:18:26.850541"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "jzzIbwSo5p1cueauvMB84w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 45], ["long_url", "55555555555555"], ["short_url", "jzzIbwSo5p1cueauvMB84w"], ["created_at", "2020-09-01 01:18:26.856427"], ["updated_at", "2020-09-01 01:18:26.856427"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WZU8FaOm4I7XGmUNuiADZA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 45], ["long_url", "66666666666666"], ["short_url", "WZU8FaOm4I7XGmUNuiADZA"], ["created_at", "2020-09-01 01:18:26.862191"], ["updated_at", "2020-09-01 01:18:26.862191"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3ZECnqnfRVr9XX0AIwIhPQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 46], ["long_url", "77777777777777"], ["short_url", "3ZECnqnfRVr9XX0AIwIhPQ"], ["created_at", "2020-09-01 01:18:26.867272"], ["updated_at", "2020-09-01 01:18:26.867272"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "y1kZeyMMxwyvMMAi4hu7rA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 46], ["long_url", "88888888888888"], ["short_url", "y1kZeyMMxwyvMMAi4hu7rA"], ["created_at", "2020-09-01 01:18:26.872655"], ["updated_at", "2020-09-01 01:18:26.872655"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-Yn7T-1oSk1ZWsunTjvR2g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 46], ["long_url", "99999999999999"], ["short_url", "-Yn7T-1oSk1ZWsunTjvR2g"], ["created_at", "2020-09-01 01:18:26.878169"], ["updated_at", "2020-09-01 01:18:26.878169"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 119], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.7ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 44], ["short_url_id", 119], ["created_at", "2020-09-01 01:18:26.891872"], ["updated_at", "2020-09-01 01:18:26.891872"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 44], ["short_url_id", 120], ["created_at", "2020-09-01 01:18:26.898604"], ["updated_at", "2020-09-01 01:18:26.898604"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 44], ["short_url_id", 121], ["created_at", "2020-09-01 01:18:26.904321"], ["updated_at", "2020-09-01 01:18:26.904321"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 45], ["short_url_id", 122], ["created_at", "2020-09-01 01:18:26.909712"], ["updated_at", "2020-09-01 01:18:26.909712"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 45], ["short_url_id", 123], ["created_at", "2020-09-01 01:18:26.915256"], ["updated_at", "2020-09-01 01:18:26.915256"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 124], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 45], ["short_url_id", 124], ["created_at", "2020-09-01 01:18:26.920776"], ["updated_at", "2020-09-01 01:18:26.920776"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 46], ["short_url_id", 116], ["created_at", "2020-09-01 01:18:26.926219"], ["updated_at", "2020-09-01 01:18:26.926219"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 117], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 46], ["short_url_id", 117], ["created_at", "2020-09-01 01:18:26.931870"], ["updated_at", "2020-09-01 01:18:26.931870"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 118], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 46], ["short_url_id", 118], ["created_at", "2020-09-01 01:18:26.937377"], ["updated_at", "2020-09-01 01:18:26.937377"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.5ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.4ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
  [1m[36mTagging Create (0.6ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 116], ["tag_topic_id", 4]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 119], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 119], ["tag_topic_id", 4]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 122], ["tag_topic_id", 4]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 117], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 117], ["tag_topic_id", 5]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 120], ["tag_topic_id", 5]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.4ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 123], ["tag_topic_id", 5]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 118], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 118], ["tag_topic_id", 6]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 121], ["tag_topic_id", 6]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 124], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 124], ["tag_topic_id", 6]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 01:18:27.030241"], ["updated_at", "2020-09-01 01:18:27.030241"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "f5JAE0u6hoyDpW_hVJaS3g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 47], ["long_url", "11111111111111"], ["short_url", "f5JAE0u6hoyDpW_hVJaS3g"], ["created_at", "2020-09-01 01:18:27.036315"], ["updated_at", "2020-09-01 01:18:27.036315"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "5sTopqLyNJvfxW-DTZ6duQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 47], ["long_url", "22222222222222"], ["short_url", "5sTopqLyNJvfxW-DTZ6duQ"], ["created_at", "2020-09-01 01:18:27.041990"], ["updated_at", "2020-09-01 01:18:27.041990"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "OiU9t7yRfnng2axqHuyMVw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 47], ["long_url", "33333333333333"], ["short_url", "OiU9t7yRfnng2axqHuyMVw"], ["created_at", "2020-09-01 01:18:27.050662"], ["updated_at", "2020-09-01 01:18:27.050662"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8PGYdRSj3u6BJ-0_EdqF6A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 47], ["long_url", "44444444444444"], ["short_url", "8PGYdRSj3u6BJ-0_EdqF6A"], ["created_at", "2020-09-01 01:18:27.056157"], ["updated_at", "2020-09-01 01:18:27.056157"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "OFdLtcP4JrV1P2yA0dXlFQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:26:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 47], ["long_url", "55555555555555"], ["short_url", "OFdLtcP4JrV1P2yA0dXlFQ"], ["created_at", "2020-09-01 01:18:27.061251"], ["updated_at", "2020-09-01 01:18:27.061251"]]
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:34:in `create_shortened_url'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SAZwkYgTsWrUM3ulvGIxtQ"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 47], ["long_url", "aaaaaaaa"], ["short_url", "SAZwkYgTsWrUM3ulvGIxtQ"], ["created_at", "2020-09-01 01:19:06.778473"], ["updated_at", "2020-09-01 01:19:06.778473"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (14.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 01:22:01.332349"], ["updated_at", "2020-09-01 01:22:01.332349"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 01:22:01.337811"], ["updated_at", "2020-09-01 01:22:01.337811"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 01:22:01.342739"], ["updated_at", "2020-09-01 01:22:01.342739"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "w8dtr9jHtq2o1OkYa2rDIw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "w8dtr9jHtq2o1OkYa2rDIw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.359685"], ["created_at", "2020-09-01 01:22:01.359730"], ["user_id", 48]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 48], ["long_url", "11111111111111"], ["short_url", "w8dtr9jHtq2o1OkYa2rDIw"], ["created_at", "2020-09-01 01:22:01.365256"], ["updated_at", "2020-09-01 01:22:01.365256"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WC0K5yH0xcax85XU64C83Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WC0K5yH0xcax85XU64C83Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.370648"], ["created_at", "2020-09-01 01:22:01.370685"], ["user_id", 48]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 48], ["long_url", "22222222222222"], ["short_url", "WC0K5yH0xcax85XU64C83Q"], ["created_at", "2020-09-01 01:22:01.372981"], ["updated_at", "2020-09-01 01:22:01.372981"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "MsS58RHCKMCUYlVgFPBldw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "MsS58RHCKMCUYlVgFPBldw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.378246"], ["created_at", "2020-09-01 01:22:01.378278"], ["user_id", 48]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 48], ["long_url", "33333333333333"], ["short_url", "MsS58RHCKMCUYlVgFPBldw"], ["created_at", "2020-09-01 01:22:01.385912"], ["updated_at", "2020-09-01 01:22:01.385912"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Z9uBFUzqSl6RFbGh8roViw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Z9uBFUzqSl6RFbGh8roViw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.390992"], ["created_at", "2020-09-01 01:22:01.391023"], ["user_id", 49]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 49], ["long_url", "44444444444444"], ["short_url", "Z9uBFUzqSl6RFbGh8roViw"], ["created_at", "2020-09-01 01:22:01.393341"], ["updated_at", "2020-09-01 01:22:01.393341"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "52kvsq__WRvu1PQx7MsZTg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "52kvsq__WRvu1PQx7MsZTg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.401844"], ["created_at", "2020-09-01 01:22:01.401875"], ["user_id", 49]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 49], ["long_url", "55555555555555"], ["short_url", "52kvsq__WRvu1PQx7MsZTg"], ["created_at", "2020-09-01 01:22:01.404549"], ["updated_at", "2020-09-01 01:22:01.404549"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_q1m3_vVJabo7_vNYasf1w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_q1m3_vVJabo7_vNYasf1w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.410117"], ["created_at", "2020-09-01 01:22:01.410168"], ["user_id", 49]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 49], ["long_url", "66666666666666"], ["short_url", "_q1m3_vVJabo7_vNYasf1w"], ["created_at", "2020-09-01 01:22:01.412467"], ["updated_at", "2020-09-01 01:22:01.412467"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "gMbYKTDUXrBgVUnEtpksLg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "gMbYKTDUXrBgVUnEtpksLg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.417670"], ["created_at", "2020-09-01 01:22:01.417700"], ["user_id", 50]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 50], ["long_url", "77777777777777"], ["short_url", "gMbYKTDUXrBgVUnEtpksLg"], ["created_at", "2020-09-01 01:22:01.419880"], ["updated_at", "2020-09-01 01:22:01.419880"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "K_vwrszaVcQDYdR8zD-7dw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "K_vwrszaVcQDYdR8zD-7dw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.424660"], ["created_at", "2020-09-01 01:22:01.424696"], ["user_id", 50]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 50], ["long_url", "88888888888888"], ["short_url", "K_vwrszaVcQDYdR8zD-7dw"], ["created_at", "2020-09-01 01:22:01.427177"], ["updated_at", "2020-09-01 01:22:01.427177"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "92noq6QE1qb1j0n606TuJQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "92noq6QE1qb1j0n606TuJQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.432429"], ["created_at", "2020-09-01 01:22:01.432461"], ["user_id", 50]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 50], ["long_url", "99999999999999"], ["short_url", "92noq6QE1qb1j0n606TuJQ"], ["created_at", "2020-09-01 01:22:01.434764"], ["updated_at", "2020-09-01 01:22:01.434764"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 48], ["short_url_id", 134], ["created_at", "2020-09-01 01:22:01.449415"], ["updated_at", "2020-09-01 01:22:01.449415"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 48], ["short_url_id", 135], ["created_at", "2020-09-01 01:22:01.455362"], ["updated_at", "2020-09-01 01:22:01.455362"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 48], ["short_url_id", 136], ["created_at", "2020-09-01 01:22:01.460872"], ["updated_at", "2020-09-01 01:22:01.460872"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 49], ["short_url_id", 137], ["created_at", "2020-09-01 01:22:01.466297"], ["updated_at", "2020-09-01 01:22:01.466297"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 49], ["short_url_id", 138], ["created_at", "2020-09-01 01:22:01.471850"], ["updated_at", "2020-09-01 01:22:01.471850"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 49], ["short_url_id", 139], ["created_at", "2020-09-01 01:22:01.477595"], ["updated_at", "2020-09-01 01:22:01.477595"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 50], ["short_url_id", 131], ["created_at", "2020-09-01 01:22:01.483050"], ["updated_at", "2020-09-01 01:22:01.483050"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 50], ["short_url_id", 132], ["created_at", "2020-09-01 01:22:01.488521"], ["updated_at", "2020-09-01 01:22:01.488521"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 50], ["short_url_id", 133], ["created_at", "2020-09-01 01:22:01.497758"], ["updated_at", "2020-09-01 01:22:01.497758"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.4ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mTagging Create (0.5ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 131], ["tag_topic_id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 134], ["tag_topic_id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 137], ["tag_topic_id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 132], ["tag_topic_id", 8]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 135], ["tag_topic_id", 8]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 138], ["tag_topic_id", 8]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.1ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 133], ["tag_topic_id", 9]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.1ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[36mTagging Create (4.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 136], ["tag_topic_id", 9]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 139], ["tag_topic_id", 9]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 01:22:01.590542"], ["updated_at", "2020-09-01 01:22:01.590542"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ym21E6zZWRONO5PUkLdZsw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ym21E6zZWRONO5PUkLdZsw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.597483"], ["created_at", "2020-09-01 01:22:01.597517"], ["user_id", 51]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 51], ["long_url", "lorem ipsum"], ["short_url", "ym21E6zZWRONO5PUkLdZsw"], ["created_at", "2020-09-01 01:22:01.599965"], ["updated_at", "2020-09-01 01:22:01.599965"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "m51h2hMGfdttDIVFHaP39Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "m51h2hMGfdttDIVFHaP39Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.605897"], ["created_at", "2020-09-01 01:22:01.605931"], ["user_id", 51]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 51], ["long_url", "notaspam.com"], ["short_url", "m51h2hMGfdttDIVFHaP39Q"], ["created_at", "2020-09-01 01:22:01.608319"], ["updated_at", "2020-09-01 01:22:01.608319"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Wbd0nPN62zHLlKye0kL01w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Wbd0nPN62zHLlKye0kL01w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.614078"], ["created_at", "2020-09-01 01:22:01.614110"], ["user_id", 51]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 51], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "Wbd0nPN62zHLlKye0kL01w"], ["created_at", "2020-09-01 01:22:01.616337"], ["updated_at", "2020-09-01 01:22:01.616337"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "U14lQpRfqV9JR1SxQ_QhLw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "U14lQpRfqV9JR1SxQ_QhLw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.621491"], ["created_at", "2020-09-01 01:22:01.621521"], ["user_id", 51]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (4.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 51], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "U14lQpRfqV9JR1SxQ_QhLw"], ["created_at", "2020-09-01 01:22:01.623585"], ["updated_at", "2020-09-01 01:22:01.623585"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "fSiZ99I2RVLUlxSwyc82jg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "fSiZ99I2RVLUlxSwyc82jg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:01.632935"], ["created_at", "2020-09-01 01:22:01.632965"], ["user_id", 51]]
  ↳ app/models/shortened_url.rb:44:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 51], ["long_url", "downloadfreeram.com"], ["short_url", "fSiZ99I2RVLUlxSwyc82jg"], ["created_at", "2020-09-01 01:22:01.635137"], ["updated_at", "2020-09-01 01:22:01.635137"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "i1QApjHPY-TBedE9Xs4xrQ"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "i1QApjHPY-TBedE9Xs4xrQ"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:21:39.062420"], ["created_at", "2020-09-01 01:22:39.062500"], ["user_id", 51]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddPremiumToUser (20200901012352)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.2ms)[0m  [1m[35mALTER TABLE "users" ADD "premium" boolean DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200901012352"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (20.8ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 01:37:42.545853"], ["updated_at", "2020-09-01 01:37:42.545853"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 01:37:42.560510"], ["updated_at", "2020-09-01 01:37:42.560510"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 01:37:42.569151"], ["updated_at", "2020-09-01 01:37:42.569151"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "4wS1hVeUmOjXJSN2xGpFQg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "4wS1hVeUmOjXJSN2xGpFQg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.587936"], ["created_at", "2020-09-01 01:37:42.587978"], ["user_id", 52]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 52]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 52], ["long_url", "11111111111111"], ["short_url", "4wS1hVeUmOjXJSN2xGpFQg"], ["created_at", "2020-09-01 01:37:42.595306"], ["updated_at", "2020-09-01 01:37:42.595306"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "jH7e4YHr3000iYYJUAFgJw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "jH7e4YHr3000iYYJUAFgJw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.600971"], ["created_at", "2020-09-01 01:37:42.601006"], ["user_id", 52]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 52]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 52], ["long_url", "22222222222222"], ["short_url", "jH7e4YHr3000iYYJUAFgJw"], ["created_at", "2020-09-01 01:37:42.605241"], ["updated_at", "2020-09-01 01:37:42.605241"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rgKQSAgUB4D0gU0jG3YOUg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rgKQSAgUB4D0gU0jG3YOUg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.616597"], ["created_at", "2020-09-01 01:37:42.616626"], ["user_id", 52]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 52]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 52], ["long_url", "33333333333333"], ["short_url", "rgKQSAgUB4D0gU0jG3YOUg"], ["created_at", "2020-09-01 01:37:42.620980"], ["updated_at", "2020-09-01 01:37:42.620980"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "LhhghbYD6oxbGJPSTLZYMg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "LhhghbYD6oxbGJPSTLZYMg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.626327"], ["created_at", "2020-09-01 01:37:42.626357"], ["user_id", 53]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 53]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 53], ["long_url", "44444444444444"], ["short_url", "LhhghbYD6oxbGJPSTLZYMg"], ["created_at", "2020-09-01 01:37:42.630044"], ["updated_at", "2020-09-01 01:37:42.630044"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8z9thVfv-wBNufSyCuJcSg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8z9thVfv-wBNufSyCuJcSg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.635232"], ["created_at", "2020-09-01 01:37:42.635261"], ["user_id", 53]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 53]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 53], ["long_url", "55555555555555"], ["short_url", "8z9thVfv-wBNufSyCuJcSg"], ["created_at", "2020-09-01 01:37:42.639053"], ["updated_at", "2020-09-01 01:37:42.639053"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "iYUCn0EgOq33rCxyabOgBw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "iYUCn0EgOq33rCxyabOgBw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.644943"], ["created_at", "2020-09-01 01:37:42.644974"], ["user_id", 53]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 53]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 53], ["long_url", "66666666666666"], ["short_url", "iYUCn0EgOq33rCxyabOgBw"], ["created_at", "2020-09-01 01:37:42.649000"], ["updated_at", "2020-09-01 01:37:42.649000"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XOGd4xnRFPTHiy24t00SFA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XOGd4xnRFPTHiy24t00SFA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.654259"], ["created_at", "2020-09-01 01:37:42.654291"], ["user_id", 54]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 54]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 54], ["long_url", "77777777777777"], ["short_url", "XOGd4xnRFPTHiy24t00SFA"], ["created_at", "2020-09-01 01:37:42.657851"], ["updated_at", "2020-09-01 01:37:42.657851"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cU4j2oo7VbrCn6x6ZJnd_w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cU4j2oo7VbrCn6x6ZJnd_w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.663525"], ["created_at", "2020-09-01 01:37:42.663562"], ["user_id", 54]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 54]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 54], ["long_url", "88888888888888"], ["short_url", "cU4j2oo7VbrCn6x6ZJnd_w"], ["created_at", "2020-09-01 01:37:42.671217"], ["updated_at", "2020-09-01 01:37:42.671217"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0ySNKdHDIoymUPdP7pQJ3A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0ySNKdHDIoymUPdP7pQJ3A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.676495"], ["created_at", "2020-09-01 01:37:42.676525"], ["user_id", 54]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 54]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 54], ["long_url", "99999999999999"], ["short_url", "0ySNKdHDIoymUPdP7pQJ3A"], ["created_at", "2020-09-01 01:37:42.679776"], ["updated_at", "2020-09-01 01:37:42.679776"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 52], ["short_url_id", 148], ["created_at", "2020-09-01 01:37:42.693292"], ["updated_at", "2020-09-01 01:37:42.693292"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 52], ["short_url_id", 149], ["created_at", "2020-09-01 01:37:42.699839"], ["updated_at", "2020-09-01 01:37:42.699839"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 52], ["short_url_id", 150], ["created_at", "2020-09-01 01:37:42.706035"], ["updated_at", "2020-09-01 01:37:42.706035"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 53], ["short_url_id", 151], ["created_at", "2020-09-01 01:37:42.711378"], ["updated_at", "2020-09-01 01:37:42.711378"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 53], ["short_url_id", 152], ["created_at", "2020-09-01 01:37:42.716491"], ["updated_at", "2020-09-01 01:37:42.716491"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 53], ["short_url_id", 153], ["created_at", "2020-09-01 01:37:42.725532"], ["updated_at", "2020-09-01 01:37:42.725532"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 145], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 54], ["short_url_id", 145], ["created_at", "2020-09-01 01:37:42.731194"], ["updated_at", "2020-09-01 01:37:42.731194"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 54], ["short_url_id", 146], ["created_at", "2020-09-01 01:37:42.737169"], ["updated_at", "2020-09-01 01:37:42.737169"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 54], ["short_url_id", 147], ["created_at", "2020-09-01 01:37:42.742587"], ["updated_at", "2020-09-01 01:37:42.742587"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.4ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 145], ["LIMIT", 1]]
  [1m[36mTagging Create (0.5ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 145], ["tag_topic_id", 10]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 148], ["tag_topic_id", 10]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 151], ["tag_topic_id", 10]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 146], ["tag_topic_id", 11]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 149], ["tag_topic_id", 11]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 152], ["tag_topic_id", 11]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 147], ["tag_topic_id", 12]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 150], ["tag_topic_id", 12]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 153], ["tag_topic_id", 12]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 01:37:42.830056"], ["updated_at", "2020-09-01 01:37:42.830056"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Vt-3_jMLStgivchKRNGMZg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Vt-3_jMLStgivchKRNGMZg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.836170"], ["created_at", "2020-09-01 01:37:42.836204"], ["user_id", 55]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 55]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 55], ["long_url", "lorem ipsum"], ["short_url", "Vt-3_jMLStgivchKRNGMZg"], ["created_at", "2020-09-01 01:37:42.840246"], ["updated_at", "2020-09-01 01:37:42.840246"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "mtEmizYGB9dKOZzYj61Wlw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "mtEmizYGB9dKOZzYj61Wlw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.845181"], ["created_at", "2020-09-01 01:37:42.845211"], ["user_id", 55]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 55]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 55], ["long_url", "notaspam.com"], ["short_url", "mtEmizYGB9dKOZzYj61Wlw"], ["created_at", "2020-09-01 01:37:42.848657"], ["updated_at", "2020-09-01 01:37:42.848657"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KOIYEWPBUsrSE5_uYmAXYQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KOIYEWPBUsrSE5_uYmAXYQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.854206"], ["created_at", "2020-09-01 01:37:42.854235"], ["user_id", 55]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 55]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 55], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "KOIYEWPBUsrSE5_uYmAXYQ"], ["created_at", "2020-09-01 01:37:42.858408"], ["updated_at", "2020-09-01 01:37:42.858408"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bIooAhNFxQ8CEe9pbeLI0w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bIooAhNFxQ8CEe9pbeLI0w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.863917"], ["created_at", "2020-09-01 01:37:42.863962"], ["user_id", 55]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 55]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 55], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "bIooAhNFxQ8CEe9pbeLI0w"], ["created_at", "2020-09-01 01:37:42.867663"], ["updated_at", "2020-09-01 01:37:42.867663"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Nr0pO_-3oplYH5qXiSKv0w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:29:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Nr0pO_-3oplYH5qXiSKv0w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:36:42.876139"], ["created_at", "2020-09-01 01:37:42.876186"], ["user_id", 55]]
  ↳ app/models/shortened_url.rb:56:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:62:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 55]]
  ↳ app/models/shortened_url.rb:66:in `nonpremium_max'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 55], ["long_url", "downloadfreeram.com"], ["short_url", "Nr0pO_-3oplYH5qXiSKv0w"], ["created_at", "2020-09-01 01:37:42.882365"], ["updated_at", "2020-09-01 01:37:42.882365"]]
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:37:in `create_shortened_url'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8u2Bv-4aecAlXUtp4hmUkg"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8u2Bv-4aecAlXUtp4hmUkg"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 01:38:08.642673"], ["created_at", "2020-09-01 01:39:08.642803"], ["user_id", 55]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 55]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE (visits.created_at < 2020-09-01 01:57:43 UTC)[0m
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE (visits.created_at < 2020-09-01 01:57:43 UTC) LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE (visits.created_at > 2020-09-01 01:58:12 UTC)[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE (visits.created_at > 2020-09-01 01:58:12 UTC) LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2020-09-01 02:06:48.693071"], ["created_at", "2020-09-01 02:07:48.693173"]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2020-09-01 01:17:56.746824"], ["created_at", "2020-09-01 02:07:56.746934"]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id"[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE NOT ("shortened_urls"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 02:12:24.259264"], ["created_at", "2020-09-01 02:13:24.259369"]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE NOT ("shortened_urls"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 01:23:29.944403"], ["created_at", "2020-09-01 02:13:29.944509"]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 01:26:37.017768"], ["created_at", "2020-09-01 02:16:37.017809"]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 02:15:40.181612"], ["created_at", "2020-09-01 02:16:40.181717"]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id"[0m
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "visits"."id" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id"[0m
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "visits"."id" != $1[0m  [["id", 106]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE "visits"."id" = $1[0m  [["id", 106]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT * FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 02:42:35.674406"], ["created_at", "2020-09-01 02:44:35.674467"]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 02:46:37.673854"], ["created_at", "2020-09-01 02:48:37.673960"]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 02:46:57.593328"], ["created_at", "2020-09-01 02:48:57.593354"], ["premium", true]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 02:47:08.404096"], ["created_at", "2020-09-01 02:49:08.404138"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 02:49:07.017061"], ["created_at", "2020-09-01 02:51:07.017090"], ["premium", false]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.7ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 148]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 149]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 150]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 151]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 152]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 153]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 145]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 146]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 147]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 02:49:31.722260"], ["created_at", "2020-09-01 02:51:31.722335"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."short_url_id" = "shortened_urls"."id" LEFT JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3 AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 02:52:20.489375"], ["created_at", "2020-09-01 02:54:20.489444"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON shortened_urls.id = visits.short_url_id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3 AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 02:54:29.182460"], ["created_at", "2020-09-01 02:56:29.182493"], ["premium", false]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (17.1ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 02:57:42.580884"], ["updated_at", "2020-09-01 02:57:42.580884"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 02:57:42.592163"], ["updated_at", "2020-09-01 02:57:42.592163"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 02:57:42.598964"], ["updated_at", "2020-09-01 02:57:42.598964"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Bv93EAijukl5PH0kJl39PA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Bv93EAijukl5PH0kJl39PA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.617233"], ["created_at", "2020-09-01 02:57:42.617293"], ["user_id", 56]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 56]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 56], ["long_url", "11111111111111"], ["short_url", "Bv93EAijukl5PH0kJl39PA"], ["created_at", "2020-09-01 02:57:42.624619"], ["updated_at", "2020-09-01 02:57:42.624619"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HuhQxXjvWPEGWRl1jES-rg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HuhQxXjvWPEGWRl1jES-rg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.630306"], ["created_at", "2020-09-01 02:57:42.630341"], ["user_id", 56]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 56]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 56], ["long_url", "22222222222222"], ["short_url", "HuhQxXjvWPEGWRl1jES-rg"], ["created_at", "2020-09-01 02:57:42.634489"], ["updated_at", "2020-09-01 02:57:42.634489"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FbBFWuRUVt9ErFUUXumMpQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FbBFWuRUVt9ErFUUXumMpQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.644796"], ["created_at", "2020-09-01 02:57:42.644828"], ["user_id", 56]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 56]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 56], ["long_url", "33333333333333"], ["short_url", "FbBFWuRUVt9ErFUUXumMpQ"], ["created_at", "2020-09-01 02:57:42.648374"], ["updated_at", "2020-09-01 02:57:42.648374"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XAIh3LzT9V_vrsNsm6PslQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XAIh3LzT9V_vrsNsm6PslQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.653414"], ["created_at", "2020-09-01 02:57:42.653445"], ["user_id", 57]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 57]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 57], ["long_url", "44444444444444"], ["short_url", "XAIh3LzT9V_vrsNsm6PslQ"], ["created_at", "2020-09-01 02:57:42.656953"], ["updated_at", "2020-09-01 02:57:42.656953"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cxWDd1nwm7ajP9WwTE_HCQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cxWDd1nwm7ajP9WwTE_HCQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.661783"], ["created_at", "2020-09-01 02:57:42.661812"], ["user_id", 57]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 57]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 57], ["long_url", "55555555555555"], ["short_url", "cxWDd1nwm7ajP9WwTE_HCQ"], ["created_at", "2020-09-01 02:57:42.665306"], ["updated_at", "2020-09-01 02:57:42.665306"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "6inI6pT6uM6-8XEUeD-BbQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "6inI6pT6uM6-8XEUeD-BbQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.670071"], ["created_at", "2020-09-01 02:57:42.670100"], ["user_id", 57]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 57]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 57], ["long_url", "66666666666666"], ["short_url", "6inI6pT6uM6-8XEUeD-BbQ"], ["created_at", "2020-09-01 02:57:42.673425"], ["updated_at", "2020-09-01 02:57:42.673425"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "RSxqu--sR5n2te-zSrdoXw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "RSxqu--sR5n2te-zSrdoXw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.678618"], ["created_at", "2020-09-01 02:57:42.678650"], ["user_id", 58]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 58]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 58], ["long_url", "77777777777777"], ["short_url", "RSxqu--sR5n2te-zSrdoXw"], ["created_at", "2020-09-01 02:57:42.683537"], ["updated_at", "2020-09-01 02:57:42.683537"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bQbJzU_EFBgQFHv3O390iQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bQbJzU_EFBgQFHv3O390iQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.689039"], ["created_at", "2020-09-01 02:57:42.689070"], ["user_id", 58]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 58]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 58], ["long_url", "88888888888888"], ["short_url", "bQbJzU_EFBgQFHv3O390iQ"], ["created_at", "2020-09-01 02:57:42.692729"], ["updated_at", "2020-09-01 02:57:42.692729"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "yDoWJDzwTmSFAIg0bjGM3Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "yDoWJDzwTmSFAIg0bjGM3Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.697929"], ["created_at", "2020-09-01 02:57:42.697962"], ["user_id", 58]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 58]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 58], ["long_url", "99999999999999"], ["short_url", "yDoWJDzwTmSFAIg0bjGM3Q"], ["created_at", "2020-09-01 02:57:42.702665"], ["updated_at", "2020-09-01 02:57:42.702665"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 56], ["short_url_id", 162], ["created_at", "2020-09-01 02:57:42.715720"], ["updated_at", "2020-09-01 02:57:42.715720"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 56], ["short_url_id", 163], ["created_at", "2020-09-01 02:57:42.720992"], ["updated_at", "2020-09-01 02:57:42.720992"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 164], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 56], ["short_url_id", 164], ["created_at", "2020-09-01 02:57:42.726615"], ["updated_at", "2020-09-01 02:57:42.726615"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 57], ["short_url_id", 165], ["created_at", "2020-09-01 02:57:42.732100"], ["updated_at", "2020-09-01 02:57:42.732100"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 57], ["short_url_id", 166], ["created_at", "2020-09-01 02:57:42.737423"], ["updated_at", "2020-09-01 02:57:42.737423"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 167], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 57], ["short_url_id", 167], ["created_at", "2020-09-01 02:57:42.746372"], ["updated_at", "2020-09-01 02:57:42.746372"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 58], ["short_url_id", 159], ["created_at", "2020-09-01 02:57:42.752165"], ["updated_at", "2020-09-01 02:57:42.752165"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 58], ["short_url_id", 160], ["created_at", "2020-09-01 02:57:42.757761"], ["updated_at", "2020-09-01 02:57:42.757761"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 58], ["short_url_id", 161], ["created_at", "2020-09-01 02:57:42.763243"], ["updated_at", "2020-09-01 02:57:42.763243"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.4ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 159], ["tag_topic_id", 13]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 162], ["tag_topic_id", 13]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 165], ["tag_topic_id", 13]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 160], ["tag_topic_id", 14]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 163], ["tag_topic_id", 14]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 166], ["tag_topic_id", 14]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.1ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 161], ["tag_topic_id", 15]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 164], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 164], ["tag_topic_id", 15]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 167], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 167], ["tag_topic_id", 15]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 02:57:42.851099"], ["updated_at", "2020-09-01 02:57:42.851099"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "M99KPgn7dMi9ODrSf82lgA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "M99KPgn7dMi9ODrSf82lgA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.857010"], ["created_at", "2020-09-01 02:57:42.857044"], ["user_id", 59]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 59]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 59], ["long_url", "lorem ipsum"], ["short_url", "M99KPgn7dMi9ODrSf82lgA"], ["created_at", "2020-09-01 02:57:42.861059"], ["updated_at", "2020-09-01 02:57:42.861059"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Ql1FST54M3B7k1ZEBkPxgg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Ql1FST54M3B7k1ZEBkPxgg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.866463"], ["created_at", "2020-09-01 02:57:42.866494"], ["user_id", 59]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 59]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 59], ["long_url", "notaspam.com"], ["short_url", "Ql1FST54M3B7k1ZEBkPxgg"], ["created_at", "2020-09-01 02:57:42.870199"], ["updated_at", "2020-09-01 02:57:42.870199"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "IqPf2KwO3CNgvrBQ98_vdQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "IqPf2KwO3CNgvrBQ98_vdQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.875494"], ["created_at", "2020-09-01 02:57:42.875524"], ["user_id", 59]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 59]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 59], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "IqPf2KwO3CNgvrBQ98_vdQ"], ["created_at", "2020-09-01 02:57:42.879147"], ["updated_at", "2020-09-01 02:57:42.879147"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ZnwtjA5OtSXwzW0TRk7zQw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ZnwtjA5OtSXwzW0TRk7zQw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.884236"], ["created_at", "2020-09-01 02:57:42.884268"], ["user_id", 59]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 59]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 59], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "ZnwtjA5OtSXwzW0TRk7zQw"], ["created_at", "2020-09-01 02:57:42.888424"], ["updated_at", "2020-09-01 02:57:42.888424"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "U6iJMyIPbZjqjU-0DFN3Yg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "U6iJMyIPbZjqjU-0DFN3Yg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 02:56:42.894935"], ["created_at", "2020-09-01 02:57:42.894967"], ["user_id", 59]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 59]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 59], ["long_url", "downloadfreeram.com"], ["short_url", "U6iJMyIPbZjqjU-0DFN3Yg"], ["created_at", "2020-09-01 02:57:42.898803"], ["updated_at", "2020-09-01 02:57:42.898803"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON shortened_urls.id = visits.short_url_id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3 AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 02:55:54.862397"], ["created_at", "2020-09-01 02:57:54.864176"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON shortened_urls.id = visits.short_url_id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3 AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 02:58:20.777929"], ["created_at", "2020-09-01 03:00:20.778154"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON shortened_urls.id = visits.short_url_id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 04:47:45.302097"], ["created_at", "2020-09-01 04:49:45.302131"]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON shortened_urls.id = visits.short_url_id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 04:48:05.430033"], ["created_at", "2020-09-01 04:50:05.430142"], ["premium", false]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 162]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 163]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.1ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 164]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 165]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 166]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 167]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 159]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 160]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 161]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 04:49:41.949670"], ["created_at", "2020-09-01 04:51:41.949706"]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 04:49:55.546546"], ["created_at", "2020-09-01 04:51:55.546580"], ["premium", false]]
  [1m[36mShortenedUrl Load (1.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 04:50:38.778262"], ["created_at", "2020-09-01 04:52:38.778348"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 04:50:53.661759"], ["created_at", "2020-09-01 04:52:53.661804"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2)[0m  [["created_at", "2020-09-01 04:51:23.209832"], ["created_at", "2020-09-01 04:53:23.209861"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (19.1ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 04:53:43.492908"], ["updated_at", "2020-09-01 04:53:43.492908"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 04:53:43.498589"], ["updated_at", "2020-09-01 04:53:43.498589"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 04:53:43.503785"], ["updated_at", "2020-09-01 04:53:43.503785"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "7MaNKSe6c8dzhBSv5rBc7g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "7MaNKSe6c8dzhBSv5rBc7g"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.520834"], ["created_at", "2020-09-01 04:53:43.520894"], ["user_id", 60]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 60]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 60], ["long_url", "11111111111111"], ["short_url", "7MaNKSe6c8dzhBSv5rBc7g"], ["created_at", "2020-09-01 04:53:43.528034"], ["updated_at", "2020-09-01 04:53:43.528034"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "2PYxWUWvxWJvny3aqWfs0w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "2PYxWUWvxWJvny3aqWfs0w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.534036"], ["created_at", "2020-09-01 04:53:43.534089"], ["user_id", 60]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 60]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 60], ["long_url", "22222222222222"], ["short_url", "2PYxWUWvxWJvny3aqWfs0w"], ["created_at", "2020-09-01 04:53:43.538394"], ["updated_at", "2020-09-01 04:53:43.538394"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "wqiVhQf6qOrBa2TJB5R0qw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "wqiVhQf6qOrBa2TJB5R0qw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.549472"], ["created_at", "2020-09-01 04:53:43.549520"], ["user_id", 60]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 60]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 60], ["long_url", "33333333333333"], ["short_url", "wqiVhQf6qOrBa2TJB5R0qw"], ["created_at", "2020-09-01 04:53:43.553801"], ["updated_at", "2020-09-01 04:53:43.553801"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "4JpVUmPBKXZRWjmdLMXnHA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "4JpVUmPBKXZRWjmdLMXnHA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.559183"], ["created_at", "2020-09-01 04:53:43.559213"], ["user_id", 61]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 61]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 61], ["long_url", "44444444444444"], ["short_url", "4JpVUmPBKXZRWjmdLMXnHA"], ["created_at", "2020-09-01 04:53:43.562919"], ["updated_at", "2020-09-01 04:53:43.562919"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "o5XtcO0CqHYkgP03bAnLQA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "o5XtcO0CqHYkgP03bAnLQA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.567848"], ["created_at", "2020-09-01 04:53:43.567882"], ["user_id", 61]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 61]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 61], ["long_url", "55555555555555"], ["short_url", "o5XtcO0CqHYkgP03bAnLQA"], ["created_at", "2020-09-01 04:53:43.572029"], ["updated_at", "2020-09-01 04:53:43.572029"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "X3GhnvHX7tcJFtHbEciCMA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "X3GhnvHX7tcJFtHbEciCMA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.577648"], ["created_at", "2020-09-01 04:53:43.577678"], ["user_id", 61]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 61]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 61], ["long_url", "66666666666666"], ["short_url", "X3GhnvHX7tcJFtHbEciCMA"], ["created_at", "2020-09-01 04:53:43.581339"], ["updated_at", "2020-09-01 04:53:43.581339"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "zh8vCtD8HcS4JH8jd2DYGQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "zh8vCtD8HcS4JH8jd2DYGQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.586501"], ["created_at", "2020-09-01 04:53:43.586532"], ["user_id", 62]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 62]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 62], ["long_url", "77777777777777"], ["short_url", "zh8vCtD8HcS4JH8jd2DYGQ"], ["created_at", "2020-09-01 04:53:43.590632"], ["updated_at", "2020-09-01 04:53:43.590632"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "uq_Heygdd5XH5rw5mdJRYA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "uq_Heygdd5XH5rw5mdJRYA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.596387"], ["created_at", "2020-09-01 04:53:43.596418"], ["user_id", 62]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 62]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 62], ["long_url", "88888888888888"], ["short_url", "uq_Heygdd5XH5rw5mdJRYA"], ["created_at", "2020-09-01 04:53:43.599969"], ["updated_at", "2020-09-01 04:53:43.599969"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ddfncmB1b7Iw1Mt9MDeoCQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ddfncmB1b7Iw1Mt9MDeoCQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.604726"], ["created_at", "2020-09-01 04:53:43.604754"], ["user_id", 62]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 62]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 62], ["long_url", "99999999999999"], ["short_url", "ddfncmB1b7Iw1Mt9MDeoCQ"], ["created_at", "2020-09-01 04:53:43.608083"], ["updated_at", "2020-09-01 04:53:43.608083"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 176], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 60], ["short_url_id", 176], ["created_at", "2020-09-01 04:53:43.625225"], ["updated_at", "2020-09-01 04:53:43.625225"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 60], ["short_url_id", 177], ["created_at", "2020-09-01 04:53:43.631599"], ["updated_at", "2020-09-01 04:53:43.631599"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 60], ["short_url_id", 178], ["created_at", "2020-09-01 04:53:43.637266"], ["updated_at", "2020-09-01 04:53:43.637266"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 61], ["short_url_id", 179], ["created_at", "2020-09-01 04:53:43.642745"], ["updated_at", "2020-09-01 04:53:43.642745"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 61], ["short_url_id", 180], ["created_at", "2020-09-01 04:53:43.648559"], ["updated_at", "2020-09-01 04:53:43.648559"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 61], ["short_url_id", 181], ["created_at", "2020-09-01 04:53:43.657580"], ["updated_at", "2020-09-01 04:53:43.657580"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 62], ["short_url_id", 173], ["created_at", "2020-09-01 04:53:43.663322"], ["updated_at", "2020-09-01 04:53:43.663322"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 174], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 62], ["short_url_id", 174], ["created_at", "2020-09-01 04:53:43.668819"], ["updated_at", "2020-09-01 04:53:43.668819"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 175], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 62], ["short_url_id", 175], ["created_at", "2020-09-01 04:53:43.674028"], ["updated_at", "2020-09-01 04:53:43.674028"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.4ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 173], ["tag_topic_id", 16]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 176], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 176], ["tag_topic_id", 16]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 179], ["tag_topic_id", 16]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 174], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 174], ["tag_topic_id", 17]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 177], ["tag_topic_id", 17]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 180], ["tag_topic_id", 17]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 175], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 175], ["tag_topic_id", 18]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 178], ["tag_topic_id", 18]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 181], ["tag_topic_id", 18]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 04:53:43.761986"], ["updated_at", "2020-09-01 04:53:43.761986"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0xTe76CxSa9CQxmAreCYPg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0xTe76CxSa9CQxmAreCYPg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.768267"], ["created_at", "2020-09-01 04:53:43.768304"], ["user_id", 63]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 63]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 63], ["long_url", "lorem ipsum"], ["short_url", "0xTe76CxSa9CQxmAreCYPg"], ["created_at", "2020-09-01 04:53:43.772309"], ["updated_at", "2020-09-01 04:53:43.772309"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "dZZO8HsagY0ZhNSvdAveKQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "dZZO8HsagY0ZhNSvdAveKQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.778171"], ["created_at", "2020-09-01 04:53:43.778216"], ["user_id", 63]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 63]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 63], ["long_url", "notaspam.com"], ["short_url", "dZZO8HsagY0ZhNSvdAveKQ"], ["created_at", "2020-09-01 04:53:43.782126"], ["updated_at", "2020-09-01 04:53:43.782126"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FMSQvwg-0pg5EggjioqmCw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FMSQvwg-0pg5EggjioqmCw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.788103"], ["created_at", "2020-09-01 04:53:43.788134"], ["user_id", 63]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 63]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 63], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "FMSQvwg-0pg5EggjioqmCw"], ["created_at", "2020-09-01 04:53:43.791856"], ["updated_at", "2020-09-01 04:53:43.791856"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "s8fR1VRJ_ZEsb_wJMgwFTA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "s8fR1VRJ_ZEsb_wJMgwFTA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.796984"], ["created_at", "2020-09-01 04:53:43.797014"], ["user_id", 63]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 63]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 63], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "s8fR1VRJ_ZEsb_wJMgwFTA"], ["created_at", "2020-09-01 04:53:43.800511"], ["updated_at", "2020-09-01 04:53:43.800511"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SJ--ETg01QxRMz1ABfTE0Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SJ--ETg01QxRMz1ABfTE0Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 04:52:43.805813"], ["created_at", "2020-09-01 04:53:43.805857"], ["user_id", 63]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 63]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 63], ["long_url", "downloadfreeram.com"], ["short_url", "SJ--ETg01QxRMz1ABfTE0Q"], ["created_at", "2020-09-01 04:53:43.809557"], ["updated_at", "2020-09-01 04:53:43.809557"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 04:53:08.351975"], ["created_at", "2020-09-01 04:54:08.352042"], ["premium", false]]
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 04:53:52.282866"], ["created_at", "2020-09-01 04:54:52.282905"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON visits.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3 AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 04:54:30.262031"], ["created_at", "2020-09-01 04:55:30.262063"], ["premium", false]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "users"."premium" = $3[0m  [["created_at", "2020-09-01 05:03:23.595804"], ["created_at", "2020-09-01 05:04:23.595894"], ["premium", false]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 05:03:55.484335"], ["created_at", "2020-09-01 05:04:55.484370"]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" RIGHT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 05:04:41.933671"], ["created_at", "2020-09-01 05:05:41.933711"]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" RIGHT OUTER JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 05:04:54.633694"], ["created_at", "2020-09-01 05:05:54.633729"]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT OUTER JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 05:05:02.244666"], ["created_at", "2020-09-01 05:06:02.244693"]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" left join visits on visits.short_url_id = shortened_urls.id WHERE "visits"."id" IS NULL[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE NOT ("visits"."created_at" BETWEEN $1 AND $2) AND "visits"."id" IS NULL[0m  [["created_at", "2020-09-01 05:15:47.777802"], ["created_at", "2020-09-01 05:16:47.777956"]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE "visits"."id" IS NULL[0m
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:18:10.282699')[0m
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at > '2020-09-01 05:18:50.031194')[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:18:58.282065')[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < 2020-09-01 05:23:35 UTC) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:28:29.703023') AND "users"."premium" = $1 AND "visits"."id" IS NULL[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:28:43.007330') AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE "visits"."id" IS NULL AND "visits"."created_at < ?" = $1 AND "users"."premium" = $2[0m  [["created_at < ?", "2020-09-01 05:30:44.847692"], ["premium", false]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE "visits"."id" IS NULL AND "visits"."created_at < ?" = $1 AND "users"."premium" = $2 LIMIT $3[0m  [["created_at < ?", "2020-09-01 05:30:44.847692"], ["premium", false], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE "visits"."id" IS NULL AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE "visits"."created_at < ?" = $1 AND "users"."premium" = $2[0m  [["created_at < ?", "2020-09-01 05:31:33.958774"], ["premium", false]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE "visits"."created_at < ?" = $1 AND "users"."premium" = $2 LIMIT $3[0m  [["created_at < ?", "2020-09-01 05:31:33.958774"], ["premium", false], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:31:42.732316') AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:32:42.923434' OR visits.id IS NULL) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:33:12.260379' OR visits.id IS NULL) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.7ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 176]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 177]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.4ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 178]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.6ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 179]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.9ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 180]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 181]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 173]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.5ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 174]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.4ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 175]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (1.6ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 186]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 182]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 184]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 185]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 183]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (14.4ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 05:34:46.182372"], ["updated_at", "2020-09-01 05:34:46.182372"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 05:34:46.194180"], ["updated_at", "2020-09-01 05:34:46.194180"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 05:34:46.200689"], ["updated_at", "2020-09-01 05:34:46.200689"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "tDFXKxDf241l8o1z-5n-_Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "tDFXKxDf241l8o1z-5n-_Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.228408"], ["created_at", "2020-09-01 05:34:46.228474"], ["user_id", 64]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 64]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (2.1ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 64], ["long_url", "11111111111111"], ["short_url", "tDFXKxDf241l8o1z-5n-_Q"], ["created_at", "2020-09-01 05:34:46.238351"], ["updated_at", "2020-09-01 05:34:46.238351"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-34aJGUJg85_2Mb2ZcQwSA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-34aJGUJg85_2Mb2ZcQwSA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.250451"], ["created_at", "2020-09-01 05:34:46.250496"], ["user_id", 64]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 64]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 64], ["long_url", "22222222222222"], ["short_url", "-34aJGUJg85_2Mb2ZcQwSA"], ["created_at", "2020-09-01 05:34:46.260219"], ["updated_at", "2020-09-01 05:34:46.260219"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "G-0zyqa_zLCz8gICp4wuHQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "G-0zyqa_zLCz8gICp4wuHQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.277587"], ["created_at", "2020-09-01 05:34:46.277637"], ["user_id", 64]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 64]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 64], ["long_url", "33333333333333"], ["short_url", "G-0zyqa_zLCz8gICp4wuHQ"], ["created_at", "2020-09-01 05:34:46.283249"], ["updated_at", "2020-09-01 05:34:46.283249"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KMZ01ako0GnuI0O-inX5dw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KMZ01ako0GnuI0O-inX5dw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.293669"], ["created_at", "2020-09-01 05:34:46.293701"], ["user_id", 65]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 65]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 65], ["long_url", "44444444444444"], ["short_url", "KMZ01ako0GnuI0O-inX5dw"], ["created_at", "2020-09-01 05:34:46.298291"], ["updated_at", "2020-09-01 05:34:46.298291"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "t_-DFJ5XrCvrel8EAUq8Zg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "t_-DFJ5XrCvrel8EAUq8Zg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.309168"], ["created_at", "2020-09-01 05:34:46.309201"], ["user_id", 65]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 65]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 65], ["long_url", "55555555555555"], ["short_url", "t_-DFJ5XrCvrel8EAUq8Zg"], ["created_at", "2020-09-01 05:34:46.313458"], ["updated_at", "2020-09-01 05:34:46.313458"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "I2WsmLeXm6i3ZuxDqTuNkg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "I2WsmLeXm6i3ZuxDqTuNkg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.319729"], ["created_at", "2020-09-01 05:34:46.319761"], ["user_id", 65]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 65]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 65], ["long_url", "66666666666666"], ["short_url", "I2WsmLeXm6i3ZuxDqTuNkg"], ["created_at", "2020-09-01 05:34:46.323728"], ["updated_at", "2020-09-01 05:34:46.323728"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HNkMV0avHQHMFaaCtCHJzQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HNkMV0avHQHMFaaCtCHJzQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.329262"], ["created_at", "2020-09-01 05:34:46.329307"], ["user_id", 66]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 66]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (1.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 66], ["long_url", "77777777777777"], ["short_url", "HNkMV0avHQHMFaaCtCHJzQ"], ["created_at", "2020-09-01 05:34:46.334899"], ["updated_at", "2020-09-01 05:34:46.334899"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YyUYjuhdU98f6g8oj3fjzw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YyUYjuhdU98f6g8oj3fjzw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.346020"], ["created_at", "2020-09-01 05:34:46.346053"], ["user_id", 66]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 66]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 66], ["long_url", "88888888888888"], ["short_url", "YyUYjuhdU98f6g8oj3fjzw"], ["created_at", "2020-09-01 05:34:46.351106"], ["updated_at", "2020-09-01 05:34:46.351106"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "r6ODuA28xLRJZ0gSSMyyzw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "r6ODuA28xLRJZ0gSSMyyzw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.356403"], ["created_at", "2020-09-01 05:34:46.356435"], ["user_id", 66]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 66]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 66], ["long_url", "99999999999999"], ["short_url", "r6ODuA28xLRJZ0gSSMyyzw"], ["created_at", "2020-09-01 05:34:46.360308"], ["updated_at", "2020-09-01 05:34:46.360308"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 190], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (1.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 64], ["short_url_id", 190], ["created_at", "2020-09-01 05:34:46.378975"], ["updated_at", "2020-09-01 05:34:46.378975"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 191], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 64], ["short_url_id", 191], ["created_at", "2020-09-01 05:34:46.386575"], ["updated_at", "2020-09-01 05:34:46.386575"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 192], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 64], ["short_url_id", 192], ["created_at", "2020-09-01 05:34:46.392785"], ["updated_at", "2020-09-01 05:34:46.392785"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 193], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 65], ["short_url_id", 193], ["created_at", "2020-09-01 05:34:46.399123"], ["updated_at", "2020-09-01 05:34:46.399123"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 65], ["short_url_id", 194], ["created_at", "2020-09-01 05:34:46.411484"], ["updated_at", "2020-09-01 05:34:46.411484"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 65], ["short_url_id", 195], ["created_at", "2020-09-01 05:34:46.421901"], ["updated_at", "2020-09-01 05:34:46.421901"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 66], ["short_url_id", 187], ["created_at", "2020-09-01 05:34:46.427483"], ["updated_at", "2020-09-01 05:34:46.427483"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 66], ["short_url_id", 188], ["created_at", "2020-09-01 05:34:46.433932"], ["updated_at", "2020-09-01 05:34:46.433932"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 189], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 66], ["short_url_id", 189], ["created_at", "2020-09-01 05:34:46.444800"], ["updated_at", "2020-09-01 05:34:46.444800"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  [1m[36mTagging Create (0.6ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 187], ["tag_topic_id", 19]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 190], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 190], ["tag_topic_id", 19]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 193], ["LIMIT", 1]]
  [1m[36mTagging Create (0.5ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 193], ["tag_topic_id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.8ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 188], ["tag_topic_id", 20]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 191], ["LIMIT", 1]]
  [1m[36mTagging Create (1.1ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 191], ["tag_topic_id", 20]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.8ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mTagging Create (1.0ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 194], ["tag_topic_id", 20]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.9ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 189], ["LIMIT", 1]]
  [1m[36mTagging Create (1.1ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 189], ["tag_topic_id", 21]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.7ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 192], ["LIMIT", 1]]
  [1m[36mTagging Create (3.8ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 192], ["tag_topic_id", 21]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (1.0ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[36mTagging Create (1.1ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 195], ["tag_topic_id", 21]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 05:34:46.661076"], ["updated_at", "2020-09-01 05:34:46.661076"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xHxeY7v3RoM8RCOLoASnYg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xHxeY7v3RoM8RCOLoASnYg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.670869"], ["created_at", "2020-09-01 05:34:46.670907"], ["user_id", 67]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 67]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 67], ["long_url", "lorem ipsum"], ["short_url", "xHxeY7v3RoM8RCOLoASnYg"], ["created_at", "2020-09-01 05:34:46.677533"], ["updated_at", "2020-09-01 05:34:46.677533"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0J4z4tQ-OEeovkCl-ZIUyA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "0J4z4tQ-OEeovkCl-ZIUyA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.683783"], ["created_at", "2020-09-01 05:34:46.683818"], ["user_id", 67]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 67]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 67], ["long_url", "notaspam.com"], ["short_url", "0J4z4tQ-OEeovkCl-ZIUyA"], ["created_at", "2020-09-01 05:34:46.692523"], ["updated_at", "2020-09-01 05:34:46.692523"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "s-CVbty4nrR2juqLdcU1_w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "s-CVbty4nrR2juqLdcU1_w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.699230"], ["created_at", "2020-09-01 05:34:46.699283"], ["user_id", 67]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 67]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (1.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 67], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "s-CVbty4nrR2juqLdcU1_w"], ["created_at", "2020-09-01 05:34:46.706281"], ["updated_at", "2020-09-01 05:34:46.706281"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "g3lC4gPxX4PIs44WgPWzFQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "g3lC4gPxX4PIs44WgPWzFQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.713384"], ["created_at", "2020-09-01 05:34:46.713430"], ["user_id", 67]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 67]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 67], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "g3lC4gPxX4PIs44WgPWzFQ"], ["created_at", "2020-09-01 05:34:46.720515"], ["updated_at", "2020-09-01 05:34:46.720515"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sXpXYdV-QlpgSOx-5FGmJg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sXpXYdV-QlpgSOx-5FGmJg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:33:46.727577"], ["created_at", "2020-09-01 05:34:46.727609"], ["user_id", 67]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 67]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 67], ["long_url", "downloadfreeram.com"], ["short_url", "sXpXYdV-QlpgSOx-5FGmJg"], ["created_at", "2020-09-01 05:34:46.732301"], ["updated_at", "2020-09-01 05:34:46.732301"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "jefferson@cats.com"], ["created_at", "2020-09-01 05:35:11.273764"], ["updated_at", "2020-09-01 05:35:11.273764"], ["premium", true]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "muenster@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "muenster@cats.com"], ["created_at", "2020-09-01 05:35:14.085773"], ["updated_at", "2020-09-01 05:35:14.085773"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "l0JLUJlEdcJwMuuk8L1aJg"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "l0JLUJlEdcJwMuuk8L1aJg"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:35:05.702091"], ["created_at", "2020-09-01 05:36:05.702230"], ["user_id", 68]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (1.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 68], ["long_url", "www.boxes.com"], ["short_url", "l0JLUJlEdcJwMuuk8L1aJg"], ["created_at", "2020-09-01 05:36:05.723086"], ["updated_at", "2020-09-01 05:36:05.723086"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "T0cMzmAkp6P-14ZCl1qgYg"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "T0cMzmAkp6P-14ZCl1qgYg"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:35:05.736940"], ["created_at", "2020-09-01 05:36:05.736981"], ["user_id", 69]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 69]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 69], ["long_url", "www.meowmix.com"], ["short_url", "T0cMzmAkp6P-14ZCl1qgYg"], ["created_at", "2020-09-01 05:36:05.740075"], ["updated_at", "2020-09-01 05:36:05.740075"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "iNy1RuLgSUD7p1ZtysisKw"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "iNy1RuLgSUD7p1ZtysisKw"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:35:07.323888"], ["created_at", "2020-09-01 05:36:07.323934"], ["user_id", 69]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 69]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 69], ["long_url", "www.smallrodents.com"], ["short_url", "iNy1RuLgSUD7p1ZtysisKw"], ["created_at", "2020-09-01 05:36:07.326755"], ["updated_at", "2020-09-01 05:36:07.326755"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mVisit Create (0.9ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 68], ["short_url_id", 201], ["created_at", "2020-09-01 05:36:57.267945"], ["updated_at", "2020-09-01 05:36:57.267945"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 202], ["LIMIT", 1]]
  [1m[36mVisit Create (0.8ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 68], ["short_url_id", 202], ["created_at", "2020-09-01 05:36:59.098904"], ["updated_at", "2020-09-01 05:36:59.098904"]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (20.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "jefferson@cats.com"], ["created_at", "2020-09-01 05:37:57.754656"], ["updated_at", "2020-09-01 05:37:57.754656"], ["premium", true]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "muenster@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "muenster@cats.com"], ["created_at", "2020-09-01 05:37:57.769540"], ["updated_at", "2020-09-01 05:37:57.769540"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xBsmnD5Pmk7BhwjUyCVgDQ"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xBsmnD5Pmk7BhwjUyCVgDQ"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:36:57.818440"], ["created_at", "2020-09-01 05:37:57.818652"], ["user_id", 70]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 70], ["long_url", "www.boxes.com"], ["short_url", "xBsmnD5Pmk7BhwjUyCVgDQ"], ["created_at", "2020-09-01 05:37:57.829984"], ["updated_at", "2020-09-01 05:37:57.829984"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ENhuthbXY7CMyRU8Rys-UQ"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ENhuthbXY7CMyRU8Rys-UQ"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:36:57.844253"], ["created_at", "2020-09-01 05:37:57.844302"], ["user_id", 71]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 71]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 71], ["long_url", "www.meowmix.com"], ["short_url", "ENhuthbXY7CMyRU8Rys-UQ"], ["created_at", "2020-09-01 05:37:57.847562"], ["updated_at", "2020-09-01 05:37:57.847562"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "w5mR2fqHERvyFz9m9Nupng"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "w5mR2fqHERvyFz9m9Nupng"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:36:57.858457"], ["created_at", "2020-09-01 05:37:57.858632"], ["user_id", 71]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 71]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 71], ["long_url", "www.smallrodents.com"], ["short_url", "w5mR2fqHERvyFz9m9Nupng"], ["created_at", "2020-09-01 05:37:57.864870"], ["updated_at", "2020-09-01 05:37:57.864870"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 204], ["LIMIT", 1]]
  [1m[36mVisit Create (1.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 70], ["short_url_id", 204], ["created_at", "2020-09-01 05:37:57.882351"], ["updated_at", "2020-09-01 05:37:57.882351"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 205], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 70], ["short_url_id", 205], ["created_at", "2020-09-01 05:37:59.152571"], ["updated_at", "2020-09-01 05:37:59.152571"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:28:26.762746' OR visits.id IS NULL) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.5ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 206]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (14.8ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "jefferson@cats.com"], ["created_at", "2020-09-01 05:40:38.850380"], ["updated_at", "2020-09-01 05:40:38.850380"], ["premium", true]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "muenster@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "muenster@cats.com"], ["created_at", "2020-09-01 05:40:38.866273"], ["updated_at", "2020-09-01 05:40:38.866273"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (21.9ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "jefferson@cats.com"], ["created_at", "2020-09-01 05:41:25.815427"], ["updated_at", "2020-09-01 05:41:25.815427"], ["premium", true]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "muenster@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "muenster@cats.com"], ["created_at", "2020-09-01 05:41:25.822559"], ["updated_at", "2020-09-01 05:41:25.822559"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "V5o9ebgy4x8rYN02Y3sGQw"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "V5o9ebgy4x8rYN02Y3sGQw"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:40:25.843280"], ["created_at", "2020-09-01 05:41:25.843368"], ["user_id", 74]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (1.5ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 74], ["long_url", "www.boxes.com"], ["short_url", "V5o9ebgy4x8rYN02Y3sGQw"], ["created_at", "2020-09-01 05:41:25.852015"], ["updated_at", "2020-09-01 05:41:25.852015"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1HOoNAbSs5dfasKl33x50g"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1HOoNAbSs5dfasKl33x50g"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:40:25.861213"], ["created_at", "2020-09-01 05:41:25.861261"], ["user_id", 75]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 75]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 75], ["long_url", "www.meowmix.com"], ["short_url", "1HOoNAbSs5dfasKl33x50g"], ["created_at", "2020-09-01 05:41:25.867711"], ["updated_at", "2020-09-01 05:41:25.867711"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WMkMLZIiSHYQG_0c9ZurTA"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WMkMLZIiSHYQG_0c9ZurTA"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:40:25.875880"], ["created_at", "2020-09-01 05:41:25.875934"], ["user_id", 75]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 75]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 75], ["long_url", "www.smallrodents.com"], ["short_url", "WMkMLZIiSHYQG_0c9ZurTA"], ["created_at", "2020-09-01 05:41:25.879235"], ["updated_at", "2020-09-01 05:41:25.879235"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 207], ["LIMIT", 1]]
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 74], ["short_url_id", 207], ["created_at", "2020-09-01 05:41:25.898105"], ["updated_at", "2020-09-01 05:41:25.898105"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 208], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 74], ["short_url_id", 208], ["created_at", "2020-09-01 05:41:25.901916"], ["updated_at", "2020-09-01 05:41:25.901916"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (16.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "jefferson@cats.com"], ["created_at", "2020-09-01 05:42:20.314154"], ["updated_at", "2020-09-01 05:42:20.314154"], ["premium", true]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "muenster@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "muenster@cats.com"], ["created_at", "2020-09-01 05:42:20.328527"], ["updated_at", "2020-09-01 05:42:20.328527"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "s2nrq13ypLKtedQXYldzhA"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "s2nrq13ypLKtedQXYldzhA"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:41:20.359996"], ["created_at", "2020-09-01 05:42:20.360227"], ["user_id", 76]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (1.1ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 76], ["long_url", "www.boxes.com"], ["short_url", "s2nrq13ypLKtedQXYldzhA"], ["created_at", "2020-09-01 05:42:20.382060"], ["updated_at", "2020-09-01 05:42:20.382060"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WpbwL1q8EPAeNyx5x3gW3A"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "WpbwL1q8EPAeNyx5x3gW3A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:41:20.418171"], ["created_at", "2020-09-01 05:42:20.418282"], ["user_id", 77]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 77]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.7ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 77], ["long_url", "www.meowmix.com"], ["short_url", "WpbwL1q8EPAeNyx5x3gW3A"], ["created_at", "2020-09-01 05:42:20.424907"], ["updated_at", "2020-09-01 05:42:20.424907"]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1zz0BFk1D-PIpeHZPBIZtg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1zz0BFk1D-PIpeHZPBIZtg"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:41:20.438044"], ["created_at", "2020-09-01 05:42:20.438117"], ["user_id", 77]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 77]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 77], ["long_url", "www.smallrodents.com"], ["short_url", "1zz0BFk1D-PIpeHZPBIZtg"], ["created_at", "2020-09-01 05:42:20.441235"], ["updated_at", "2020-09-01 05:42:20.441235"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 210], ["LIMIT", 1]]
  [1m[36mVisit Create (1.0ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 76], ["short_url_id", 210], ["created_at", "2020-09-01 05:42:20.463464"], ["updated_at", "2020-09-01 05:42:20.463464"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 211], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 76], ["short_url_id", 211], ["created_at", "2020-09-01 05:42:22.769258"], ["updated_at", "2020-09-01 05:42:22.769258"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:32:42.924548' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:32:42.924548') AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (shortened_urls.created_at < '2020-09-01 05:44:35.545009' OR visits.id IS NULL) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (25.1ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 05:46:01.695940"], ["updated_at", "2020-09-01 05:46:01.695940"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 05:46:01.702413"], ["updated_at", "2020-09-01 05:46:01.702413"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 05:46:01.707987"], ["updated_at", "2020-09-01 05:46:01.707987"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "76i7iE5HkBbZKDUlhY_r5w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "76i7iE5HkBbZKDUlhY_r5w"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.724417"], ["created_at", "2020-09-01 05:46:01.724460"], ["user_id", 78]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 78]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 78], ["long_url", "11111111111111"], ["short_url", "76i7iE5HkBbZKDUlhY_r5w"], ["created_at", "2020-09-01 05:46:01.731323"], ["updated_at", "2020-09-01 05:46:01.731323"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SRM1tExBo_2tl4Iwt42OCQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SRM1tExBo_2tl4Iwt42OCQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.745607"], ["created_at", "2020-09-01 05:46:01.745711"], ["user_id", 78]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 78]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 78], ["long_url", "22222222222222"], ["short_url", "SRM1tExBo_2tl4Iwt42OCQ"], ["created_at", "2020-09-01 05:46:01.754782"], ["updated_at", "2020-09-01 05:46:01.754782"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "tUD65SlW3kU5CqqHqM9oiQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "tUD65SlW3kU5CqqHqM9oiQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.768928"], ["created_at", "2020-09-01 05:46:01.768963"], ["user_id", 78]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 78]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 78], ["long_url", "33333333333333"], ["short_url", "tUD65SlW3kU5CqqHqM9oiQ"], ["created_at", "2020-09-01 05:46:01.772816"], ["updated_at", "2020-09-01 05:46:01.772816"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SDQETZXhof7oGwjOq8okrA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "SDQETZXhof7oGwjOq8okrA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.778459"], ["created_at", "2020-09-01 05:46:01.778503"], ["user_id", 79]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 79]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 79], ["long_url", "44444444444444"], ["short_url", "SDQETZXhof7oGwjOq8okrA"], ["created_at", "2020-09-01 05:46:01.782415"], ["updated_at", "2020-09-01 05:46:01.782415"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KOPsOjgzSx4qUXHtkYhvkQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "KOPsOjgzSx4qUXHtkYhvkQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.787600"], ["created_at", "2020-09-01 05:46:01.787628"], ["user_id", 79]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 79]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 79], ["long_url", "55555555555555"], ["short_url", "KOPsOjgzSx4qUXHtkYhvkQ"], ["created_at", "2020-09-01 05:46:01.791064"], ["updated_at", "2020-09-01 05:46:01.791064"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "CtlTxHQTabo6TIXghImbkA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "CtlTxHQTabo6TIXghImbkA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.796475"], ["created_at", "2020-09-01 05:46:01.796522"], ["user_id", 79]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 79]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 79], ["long_url", "66666666666666"], ["short_url", "CtlTxHQTabo6TIXghImbkA"], ["created_at", "2020-09-01 05:46:01.800498"], ["updated_at", "2020-09-01 05:46:01.800498"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Lz-a6DpDKbbjuNLSQ5rBpw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Lz-a6DpDKbbjuNLSQ5rBpw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.805977"], ["created_at", "2020-09-01 05:46:01.806006"], ["user_id", 80]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 80]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 80], ["long_url", "77777777777777"], ["short_url", "Lz-a6DpDKbbjuNLSQ5rBpw"], ["created_at", "2020-09-01 05:46:01.809709"], ["updated_at", "2020-09-01 05:46:01.809709"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1KXum_elKhxBuj4hfmsbzw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1KXum_elKhxBuj4hfmsbzw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.815030"], ["created_at", "2020-09-01 05:46:01.815074"], ["user_id", 80]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 80]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 80], ["long_url", "88888888888888"], ["short_url", "1KXum_elKhxBuj4hfmsbzw"], ["created_at", "2020-09-01 05:46:01.819253"], ["updated_at", "2020-09-01 05:46:01.819253"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sKUY0DbEwdXztZDFRA_6hQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sKUY0DbEwdXztZDFRA_6hQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:01.824639"], ["created_at", "2020-09-01 05:46:01.824668"], ["user_id", 80]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 80]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 80], ["long_url", "99999999999999"], ["short_url", "sKUY0DbEwdXztZDFRA_6hQ"], ["created_at", "2020-09-01 05:46:01.828085"], ["updated_at", "2020-09-01 05:46:01.828085"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 216], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 78], ["short_url_id", 216], ["created_at", "2020-09-01 05:46:01.841317"], ["updated_at", "2020-09-01 05:46:01.841317"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 78], ["short_url_id", 217], ["created_at", "2020-09-01 05:46:01.847177"], ["updated_at", "2020-09-01 05:46:01.847177"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.7ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 78], ["short_url_id", 218], ["created_at", "2020-09-01 05:46:01.859994"], ["updated_at", "2020-09-01 05:46:01.859994"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 79], ["short_url_id", 219], ["created_at", "2020-09-01 05:46:01.871442"], ["updated_at", "2020-09-01 05:46:01.871442"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 79], ["short_url_id", 220], ["created_at", "2020-09-01 05:46:01.879292"], ["updated_at", "2020-09-01 05:46:01.879292"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 221], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 79], ["short_url_id", 221], ["created_at", "2020-09-01 05:46:01.889052"], ["updated_at", "2020-09-01 05:46:01.889052"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 80], ["short_url_id", 213], ["created_at", "2020-09-01 05:46:01.895008"], ["updated_at", "2020-09-01 05:46:01.895008"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 80], ["short_url_id", 214], ["created_at", "2020-09-01 05:46:01.900656"], ["updated_at", "2020-09-01 05:46:01.900656"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 80], ["short_url_id", 215], ["created_at", "2020-09-01 05:46:01.906060"], ["updated_at", "2020-09-01 05:46:01.906060"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.4ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 213], ["tag_topic_id", 22]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 216], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 216], ["tag_topic_id", 22]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 219], ["tag_topic_id", 22]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.4ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 214], ["tag_topic_id", 23]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 217], ["tag_topic_id", 23]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 220], ["tag_topic_id", 23]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 215], ["tag_topic_id", 24]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 218], ["tag_topic_id", 24]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 221], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 221], ["tag_topic_id", 24]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 05:46:02.002244"], ["updated_at", "2020-09-01 05:46:02.002244"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cUtJhQr8n9YziQX0N5NM2Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cUtJhQr8n9YziQX0N5NM2Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:02.008473"], ["created_at", "2020-09-01 05:46:02.008527"], ["user_id", 81]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 81]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 81], ["long_url", "lorem ipsum"], ["short_url", "cUtJhQr8n9YziQX0N5NM2Q"], ["created_at", "2020-09-01 05:46:02.012568"], ["updated_at", "2020-09-01 05:46:02.012568"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "2y4cuSpwJzGNPO91roEKLQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "2y4cuSpwJzGNPO91roEKLQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:02.018198"], ["created_at", "2020-09-01 05:46:02.018229"], ["user_id", 81]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 81]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 81], ["long_url", "notaspam.com"], ["short_url", "2y4cuSpwJzGNPO91roEKLQ"], ["created_at", "2020-09-01 05:46:02.022182"], ["updated_at", "2020-09-01 05:46:02.022182"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "dvEoE_ZqH1HTToaytiVz1Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "dvEoE_ZqH1HTToaytiVz1Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:02.031044"], ["created_at", "2020-09-01 05:46:02.031186"], ["user_id", 81]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 81]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 81], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "dvEoE_ZqH1HTToaytiVz1Q"], ["created_at", "2020-09-01 05:46:02.037106"], ["updated_at", "2020-09-01 05:46:02.037106"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "U3sEcR0bCVQIcqXFVmlqHw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "U3sEcR0bCVQIcqXFVmlqHw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:02.043223"], ["created_at", "2020-09-01 05:46:02.043259"], ["user_id", 81]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 81]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 81], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "U3sEcR0bCVQIcqXFVmlqHw"], ["created_at", "2020-09-01 05:46:02.047059"], ["updated_at", "2020-09-01 05:46:02.047059"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "BYHYsSWyBOsKkYLQgPuqfw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:40:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "BYHYsSWyBOsKkYLQgPuqfw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:45:02.055830"], ["created_at", "2020-09-01 05:46:02.055879"], ["user_id", 81]]
  ↳ app/models/shortened_url.rb:67:in `no_spamming'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:73:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 81]]
  ↳ app/models/shortened_url.rb:77:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 81], ["long_url", "downloadfreeram.com"], ["short_url", "BYHYsSWyBOsKkYLQgPuqfw"], ["created_at", "2020-09-01 05:46:02.061759"], ["updated_at", "2020-09-01 05:46:02.061759"]]
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:48:in `create_shortened_url'
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:47:43.354399' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:47:43.354399')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (20.7ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jefferson@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "jefferson@cats.com"], ["created_at", "2020-09-01 05:50:00.357966"], ["updated_at", "2020-09-01 05:50:00.357966"], ["premium", true]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "muenster@cats.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "muenster@cats.com"], ["created_at", "2020-09-01 05:50:00.370676"], ["updated_at", "2020-09-01 05:50:00.370676"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "qZzHQnIVwg9Uoe08AdHq6A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "qZzHQnIVwg9Uoe08AdHq6A"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:49:00.402091"], ["created_at", "2020-09-01 05:50:00.402427"], ["user_id", 82]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (1.0ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 82], ["long_url", "www.boxes.com"], ["short_url", "qZzHQnIVwg9Uoe08AdHq6A"], ["created_at", "2020-09-01 05:50:00.415589"], ["updated_at", "2020-09-01 05:50:00.415589"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "miWW4tzCCvwbjomVRQDjLQ"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "miWW4tzCCvwbjomVRQDjLQ"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:49:00.429331"], ["created_at", "2020-09-01 05:50:00.429403"], ["user_id", 83]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 83]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 83], ["long_url", "www.meowmix.com"], ["short_url", "miWW4tzCCvwbjomVRQDjLQ"], ["created_at", "2020-09-01 05:50:00.443404"], ["updated_at", "2020-09-01 05:50:00.443404"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "7z-MC1gVyakxoV-Y8BL42Q"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "7z-MC1gVyakxoV-Y8BL42Q"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:49:00.451073"], ["created_at", "2020-09-01 05:50:00.451118"], ["user_id", 83]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 83]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.8ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 83], ["long_url", "www.smallrodents.com"], ["short_url", "7z-MC1gVyakxoV-Y8BL42Q"], ["created_at", "2020-09-01 05:50:00.454397"], ["updated_at", "2020-09-01 05:50:00.454397"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 227], ["LIMIT", 1]]
  [1m[36mVisit Create (0.6ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 82], ["short_url_id", 227], ["created_at", "2020-09-01 05:50:00.492546"], ["updated_at", "2020-09-01 05:50:00.492546"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 228], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 82], ["short_url_id", 228], ["created_at", "2020-09-01 05:50:01.891477"], ["updated_at", "2020-09-01 05:50:01.891477"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:40:17.572915' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:40:17.572915')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:49:53.173908' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:49:53.173908')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:50:18.800923' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:50:18.800923')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 228]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 229]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "k6ovgwDm8i5P5NH5LnTxUA"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "k6ovgwDm8i5P5NH5LnTxUA"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:51:17.020584"], ["created_at", "2020-09-01 05:52:17.020690"], ["user_id", 83]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 83]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.7ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 83], ["long_url", "www.meowmix.com"], ["short_url", "k6ovgwDm8i5P5NH5LnTxUA"], ["created_at", "2020-09-01 05:52:17.032747"], ["updated_at", "2020-09-01 05:52:17.032747"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 230], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 83], ["short_url_id", 230], ["created_at", "2020-09-01 05:52:20.355196"], ["updated_at", "2020-09-01 05:52:20.355196"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Z58mT2byjMsD2Z28qT3z9g"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Z58mT2byjMsD2Z28qT3z9g"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:53:34.972204"], ["created_at", "2020-09-01 05:54:34.972259"], ["user_id", 83]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 83]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 83], ["long_url", "www.meowmix.com"], ["short_url", "Z58mT2byjMsD2Z28qT3z9g"], ["created_at", "2020-09-01 05:54:34.975191"], ["updated_at", "2020-09-01 05:54:34.975191"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 231], ["LIMIT", 1]]
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 83], ["short_url_id", 231], ["created_at", "2020-09-01 05:54:36.790156"], ["updated_at", "2020-09-01 05:54:36.790156"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 231], ["LIMIT", 1]]
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 82], ["short_url_id", 231], ["created_at", "2020-09-01 05:55:06.592706"], ["updated_at", "2020-09-01 05:55:06.592706"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:54:13.604388' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:54:13.604388')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 230]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (16.0ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 05:57:39.655068"], ["updated_at", "2020-09-01 05:57:39.655068"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 05:57:39.660861"], ["updated_at", "2020-09-01 05:57:39.660861"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 05:57:39.666174"], ["updated_at", "2020-09-01 05:57:39.666174"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_GY8hjscbcVK34E_QxWUrg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "_GY8hjscbcVK34E_QxWUrg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.683036"], ["created_at", "2020-09-01 05:57:39.683109"], ["user_id", 84]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 84]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 84], ["long_url", "11111111111111"], ["short_url", "_GY8hjscbcVK34E_QxWUrg"], ["created_at", "2020-09-01 05:57:39.690373"], ["updated_at", "2020-09-01 05:57:39.690373"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-rRLxafyQXuZeH6Lqog8yg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "-rRLxafyQXuZeH6Lqog8yg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.696661"], ["created_at", "2020-09-01 05:57:39.696695"], ["user_id", 84]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 84]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 84], ["long_url", "22222222222222"], ["short_url", "-rRLxafyQXuZeH6Lqog8yg"], ["created_at", "2020-09-01 05:57:39.700939"], ["updated_at", "2020-09-01 05:57:39.700939"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YksZa5EZ7vB1qFWOtRZWXg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YksZa5EZ7vB1qFWOtRZWXg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.711838"], ["created_at", "2020-09-01 05:57:39.711886"], ["user_id", 84]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 84]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 84], ["long_url", "33333333333333"], ["short_url", "YksZa5EZ7vB1qFWOtRZWXg"], ["created_at", "2020-09-01 05:57:39.715678"], ["updated_at", "2020-09-01 05:57:39.715678"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sxE1ivxBIRXpUa2006SPtA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sxE1ivxBIRXpUa2006SPtA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.720716"], ["created_at", "2020-09-01 05:57:39.720745"], ["user_id", 85]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 85]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 85], ["long_url", "44444444444444"], ["short_url", "sxE1ivxBIRXpUa2006SPtA"], ["created_at", "2020-09-01 05:57:39.724004"], ["updated_at", "2020-09-01 05:57:39.724004"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "zu6JizXBLT1NnAeZkqxhjw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "zu6JizXBLT1NnAeZkqxhjw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.728875"], ["created_at", "2020-09-01 05:57:39.728904"], ["user_id", 85]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 85]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 85], ["long_url", "55555555555555"], ["short_url", "zu6JizXBLT1NnAeZkqxhjw"], ["created_at", "2020-09-01 05:57:39.732460"], ["updated_at", "2020-09-01 05:57:39.732460"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DXARY0cx-haxObZuY6y8gA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DXARY0cx-haxObZuY6y8gA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.737231"], ["created_at", "2020-09-01 05:57:39.737262"], ["user_id", 85]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 85]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 85], ["long_url", "66666666666666"], ["short_url", "DXARY0cx-haxObZuY6y8gA"], ["created_at", "2020-09-01 05:57:39.740755"], ["updated_at", "2020-09-01 05:57:39.740755"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rU3-UYStfB30imEZ1r5hGQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rU3-UYStfB30imEZ1r5hGQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.745645"], ["created_at", "2020-09-01 05:57:39.745674"], ["user_id", 86]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 86]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 86], ["long_url", "77777777777777"], ["short_url", "rU3-UYStfB30imEZ1r5hGQ"], ["created_at", "2020-09-01 05:57:39.749155"], ["updated_at", "2020-09-01 05:57:39.749155"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "E5owdhHQTqvDPd9J0Vr2WQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "E5owdhHQTqvDPd9J0Vr2WQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.754266"], ["created_at", "2020-09-01 05:57:39.754294"], ["user_id", 86]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 86]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 86], ["long_url", "88888888888888"], ["short_url", "E5owdhHQTqvDPd9J0Vr2WQ"], ["created_at", "2020-09-01 05:57:39.758120"], ["updated_at", "2020-09-01 05:57:39.758120"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "nP5IjsQDbeYU_z5AWveN1A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "nP5IjsQDbeYU_z5AWveN1A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.763185"], ["created_at", "2020-09-01 05:57:39.763216"], ["user_id", 86]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 86]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 86], ["long_url", "99999999999999"], ["short_url", "nP5IjsQDbeYU_z5AWveN1A"], ["created_at", "2020-09-01 05:57:39.766762"], ["updated_at", "2020-09-01 05:57:39.766762"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 84], ["short_url_id", 235], ["created_at", "2020-09-01 05:57:39.780985"], ["updated_at", "2020-09-01 05:57:39.780985"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 84], ["short_url_id", 236], ["created_at", "2020-09-01 05:57:39.786871"], ["updated_at", "2020-09-01 05:57:39.786871"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 84], ["short_url_id", 237], ["created_at", "2020-09-01 05:57:39.792842"], ["updated_at", "2020-09-01 05:57:39.792842"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 85], ["short_url_id", 238], ["created_at", "2020-09-01 05:57:39.798679"], ["updated_at", "2020-09-01 05:57:39.798679"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 85], ["short_url_id", 239], ["created_at", "2020-09-01 05:57:39.804075"], ["updated_at", "2020-09-01 05:57:39.804075"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 85], ["short_url_id", 240], ["created_at", "2020-09-01 05:57:39.809786"], ["updated_at", "2020-09-01 05:57:39.809786"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 232], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 86], ["short_url_id", 232], ["created_at", "2020-09-01 05:57:39.818828"], ["updated_at", "2020-09-01 05:57:39.818828"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 86], ["short_url_id", 233], ["created_at", "2020-09-01 05:57:39.824164"], ["updated_at", "2020-09-01 05:57:39.824164"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 86], ["short_url_id", 234], ["created_at", "2020-09-01 05:57:39.829496"], ["updated_at", "2020-09-01 05:57:39.829496"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 232], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 232], ["tag_topic_id", 25]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 235], ["tag_topic_id", 25]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 238], ["tag_topic_id", 25]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 233], ["tag_topic_id", 26]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 236], ["tag_topic_id", 26]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 239], ["tag_topic_id", 26]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 234], ["tag_topic_id", 27]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 237], ["tag_topic_id", 27]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.1ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 240], ["tag_topic_id", 27]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 05:57:39.917018"], ["updated_at", "2020-09-01 05:57:39.917018"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "lJ7t_5iiDzGBj2W2etAvzg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "lJ7t_5iiDzGBj2W2etAvzg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.922920"], ["created_at", "2020-09-01 05:57:39.922974"], ["user_id", 87]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 87]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 87], ["long_url", "lorem ipsum"], ["short_url", "lJ7t_5iiDzGBj2W2etAvzg"], ["created_at", "2020-09-01 05:57:39.926925"], ["updated_at", "2020-09-01 05:57:39.926925"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XwpDNN7XY_U_IfNSgwCzYA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XwpDNN7XY_U_IfNSgwCzYA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.931926"], ["created_at", "2020-09-01 05:57:39.931957"], ["user_id", 87]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 87]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 87], ["long_url", "notaspam.com"], ["short_url", "XwpDNN7XY_U_IfNSgwCzYA"], ["created_at", "2020-09-01 05:57:39.935739"], ["updated_at", "2020-09-01 05:57:39.935739"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Mz6jjFJSwpR3QUIn_NrWPw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Mz6jjFJSwpR3QUIn_NrWPw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.941006"], ["created_at", "2020-09-01 05:57:39.941034"], ["user_id", 87]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 87]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 87], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "Mz6jjFJSwpR3QUIn_NrWPw"], ["created_at", "2020-09-01 05:57:39.944656"], ["updated_at", "2020-09-01 05:57:39.944656"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "CMExpMAgRRwSUjlMBPZU2A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "CMExpMAgRRwSUjlMBPZU2A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.950204"], ["created_at", "2020-09-01 05:57:39.950234"], ["user_id", 87]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 87]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 87], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "CMExpMAgRRwSUjlMBPZU2A"], ["created_at", "2020-09-01 05:57:39.953970"], ["updated_at", "2020-09-01 05:57:39.953970"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DZHEonEjzoibqASeF60yjw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:41:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "DZHEonEjzoibqASeF60yjw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 05:56:39.958864"], ["created_at", "2020-09-01 05:57:39.958893"], ["user_id", 87]]
  ↳ app/models/shortened_url.rb:68:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:74:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 87]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 87], ["long_url", "downloadfreeram.com"], ["short_url", "DZHEonEjzoibqASeF60yjw"], ["created_at", "2020-09-01 05:57:39.962455"], ["updated_at", "2020-09-01 05:57:39.962455"]]
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:49:in `create_shortened_url'
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 05:57:57.561464' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 05:57:57.561464')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 235]]
  [1m[36mVisit Destroy (0.5ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 164]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (14.2ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 06:01:58.702949"], ["updated_at", "2020-09-01 06:01:58.702949"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 06:01:58.708714"], ["updated_at", "2020-09-01 06:01:58.708714"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 06:01:58.713811"], ["updated_at", "2020-09-01 06:01:58.713811"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rRlOpuek5JE439rXQS3Dmw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "rRlOpuek5JE439rXQS3Dmw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.731168"], ["created_at", "2020-09-01 06:01:58.731241"], ["user_id", 88]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 88]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 88], ["long_url", "11111111111111"], ["short_url", "rRlOpuek5JE439rXQS3Dmw"], ["created_at", "2020-09-01 06:01:58.737853"], ["updated_at", "2020-09-01 06:01:58.737853"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "vYjqj8Clf54iD9xWCWxs0A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "vYjqj8Clf54iD9xWCWxs0A"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.743088"], ["created_at", "2020-09-01 06:01:58.743123"], ["user_id", 88]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 88]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 88], ["long_url", "22222222222222"], ["short_url", "vYjqj8Clf54iD9xWCWxs0A"], ["created_at", "2020-09-01 06:01:58.746842"], ["updated_at", "2020-09-01 06:01:58.746842"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ONd62yB_RMxCuVKWl4pJOA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "ONd62yB_RMxCuVKWl4pJOA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.757328"], ["created_at", "2020-09-01 06:01:58.757358"], ["user_id", 88]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 88]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 88], ["long_url", "33333333333333"], ["short_url", "ONd62yB_RMxCuVKWl4pJOA"], ["created_at", "2020-09-01 06:01:58.760839"], ["updated_at", "2020-09-01 06:01:58.760839"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bgOhHQD2927AkCYUA2Z0bw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "bgOhHQD2927AkCYUA2Z0bw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.765571"], ["created_at", "2020-09-01 06:01:58.765601"], ["user_id", 89]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 89]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 89], ["long_url", "44444444444444"], ["short_url", "bgOhHQD2927AkCYUA2Z0bw"], ["created_at", "2020-09-01 06:01:58.769224"], ["updated_at", "2020-09-01 06:01:58.769224"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1SAyYKKmRF2axpZgFHkLoQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1SAyYKKmRF2axpZgFHkLoQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.774037"], ["created_at", "2020-09-01 06:01:58.774066"], ["user_id", 89]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 89]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 89], ["long_url", "55555555555555"], ["short_url", "1SAyYKKmRF2axpZgFHkLoQ"], ["created_at", "2020-09-01 06:01:58.777670"], ["updated_at", "2020-09-01 06:01:58.777670"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "R0dclc6jSELBaC3RWJO1qg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "R0dclc6jSELBaC3RWJO1qg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.783031"], ["created_at", "2020-09-01 06:01:58.783060"], ["user_id", 89]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 89]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 89], ["long_url", "66666666666666"], ["short_url", "R0dclc6jSELBaC3RWJO1qg"], ["created_at", "2020-09-01 06:01:58.786946"], ["updated_at", "2020-09-01 06:01:58.786946"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "4Ik4udyX4lapDaddCZUGkA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "4Ik4udyX4lapDaddCZUGkA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.792099"], ["created_at", "2020-09-01 06:01:58.792128"], ["user_id", 90]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 90]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 90], ["long_url", "77777777777777"], ["short_url", "4Ik4udyX4lapDaddCZUGkA"], ["created_at", "2020-09-01 06:01:58.795881"], ["updated_at", "2020-09-01 06:01:58.795881"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1pUrYdZB1g8dA0kxcTmMlw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "1pUrYdZB1g8dA0kxcTmMlw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.801271"], ["created_at", "2020-09-01 06:01:58.801301"], ["user_id", 90]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 90]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 90], ["long_url", "88888888888888"], ["short_url", "1pUrYdZB1g8dA0kxcTmMlw"], ["created_at", "2020-09-01 06:01:58.805577"], ["updated_at", "2020-09-01 06:01:58.805577"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "CZF_2vXP7OEOwCsA12vcNw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "CZF_2vXP7OEOwCsA12vcNw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.810387"], ["created_at", "2020-09-01 06:01:58.810415"], ["user_id", 90]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 90]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 90], ["long_url", "99999999999999"], ["short_url", "CZF_2vXP7OEOwCsA12vcNw"], ["created_at", "2020-09-01 06:01:58.814173"], ["updated_at", "2020-09-01 06:01:58.814173"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 249], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.5ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 88], ["short_url_id", 249], ["created_at", "2020-09-01 06:01:58.827757"], ["updated_at", "2020-09-01 06:01:58.827757"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 250], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 88], ["short_url_id", 250], ["created_at", "2020-09-01 06:01:58.833245"], ["updated_at", "2020-09-01 06:01:58.833245"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 88], ["short_url_id", 251], ["created_at", "2020-09-01 06:01:58.839251"], ["updated_at", "2020-09-01 06:01:58.839251"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 89], ["short_url_id", 252], ["created_at", "2020-09-01 06:01:58.845021"], ["updated_at", "2020-09-01 06:01:58.845021"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 89], ["short_url_id", 253], ["created_at", "2020-09-01 06:01:58.850419"], ["updated_at", "2020-09-01 06:01:58.850419"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 254], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 89], ["short_url_id", 254], ["created_at", "2020-09-01 06:01:58.855861"], ["updated_at", "2020-09-01 06:01:58.855861"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 90], ["short_url_id", 246], ["created_at", "2020-09-01 06:01:58.864537"], ["updated_at", "2020-09-01 06:01:58.864537"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 90], ["short_url_id", 247], ["created_at", "2020-09-01 06:01:58.869460"], ["updated_at", "2020-09-01 06:01:58.869460"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 248], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 90], ["short_url_id", 248], ["created_at", "2020-09-01 06:01:58.874921"], ["updated_at", "2020-09-01 06:01:58.874921"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.1ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 246], ["tag_topic_id", 28]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 249], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 249], ["tag_topic_id", 28]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 252], ["tag_topic_id", 28]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 247], ["tag_topic_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 250], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 250], ["tag_topic_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 253], ["tag_topic_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 248], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 248], ["tag_topic_id", 30]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 251], ["tag_topic_id", 30]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 254], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 254], ["tag_topic_id", 30]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 06:01:58.961795"], ["updated_at", "2020-09-01 06:01:58.961795"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xjdGcwmcUFC9NOq_4TXtGw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "xjdGcwmcUFC9NOq_4TXtGw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.967809"], ["created_at", "2020-09-01 06:01:58.967879"], ["user_id", 91]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 91]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 91], ["long_url", "lorem ipsum"], ["short_url", "xjdGcwmcUFC9NOq_4TXtGw"], ["created_at", "2020-09-01 06:01:58.971927"], ["updated_at", "2020-09-01 06:01:58.971927"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HI24OZjaYcPOxeBPxdDxiQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HI24OZjaYcPOxeBPxdDxiQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.977062"], ["created_at", "2020-09-01 06:01:58.977091"], ["user_id", 91]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 91]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 91], ["long_url", "notaspam.com"], ["short_url", "HI24OZjaYcPOxeBPxdDxiQ"], ["created_at", "2020-09-01 06:01:58.981124"], ["updated_at", "2020-09-01 06:01:58.981124"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Mo5SMqKO9iLqmZJY2xbwBA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Mo5SMqKO9iLqmZJY2xbwBA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.986545"], ["created_at", "2020-09-01 06:01:58.986589"], ["user_id", 91]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 91]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 91], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "Mo5SMqKO9iLqmZJY2xbwBA"], ["created_at", "2020-09-01 06:01:58.990527"], ["updated_at", "2020-09-01 06:01:58.990527"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "vLS3pA0t2eGzkqnKqjQsuA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "vLS3pA0t2eGzkqnKqjQsuA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:58.995906"], ["created_at", "2020-09-01 06:01:58.995935"], ["user_id", 91]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 91]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 91], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "vLS3pA0t2eGzkqnKqjQsuA"], ["created_at", "2020-09-01 06:01:58.999447"], ["updated_at", "2020-09-01 06:01:58.999447"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cXljjEEWIheqNp6N2tcnOQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "cXljjEEWIheqNp6N2tcnOQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:00:59.004586"], ["created_at", "2020-09-01 06:01:59.004616"], ["user_id", 91]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 91]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 91], ["long_url", "downloadfreeram.com"], ["short_url", "cXljjEEWIheqNp6N2tcnOQ"], ["created_at", "2020-09-01 06:01:59.008461"], ["updated_at", "2020-09-01 06:01:59.008461"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mVisit Load (1.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 246]]
  [1m[36mTagging Load (1.0ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 246]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT DISTINCT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."user_id" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 246]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" INNER JOIN "taggings" ON "tag_topics"."id" = "taggings"."tag_topic_id" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 246]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 06:01:51.993801' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 06:01:51.993801')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" LEFT JOIN visits ON visits.short_url_id = shortened_urls.id JOIN users ON shortened_urls.user_id = users.id WHERE (visits.created_at < '2020-09-01 06:02:03.226237' OR (visits.id IS NULL AND shortened_urls.created_at < '2020-09-01 06:02:03.226237')) AND "users"."premium" = $1[0m  [["premium", false]]
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (1.5ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 249]]
  [1m[36mVisit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 173]]
  [1m[36mTagging Load (0.8ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 249]]
  [1m[36mTagging Destroy (0.7ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 83]]
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 249]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 250]]
  [1m[36mVisit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 174]]
  [1m[36mTagging Load (0.2ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 250]]
  [1m[36mTagging Destroy (0.3ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 86]]
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 250]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 251]]
  [1m[36mVisit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 175]]
  [1m[36mTagging Load (0.2ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 251]]
  [1m[36mTagging Destroy (0.2ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 89]]
  [1m[36mShortenedUrl Destroy (0.8ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 251]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 252]]
  [1m[36mVisit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 176]]
  [1m[36mTagging Load (1.4ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 252]]
  [1m[36mTagging Destroy (0.3ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 84]]
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 252]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 253]]
  [1m[36mVisit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 177]]
  [1m[36mTagging Load (0.4ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 253]]
  [1m[36mTagging Destroy (0.5ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 87]]
  [1m[36mShortenedUrl Destroy (0.4ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 253]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 254]]
  [1m[36mVisit Destroy (0.5ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 178]]
  [1m[36mTagging Load (0.2ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 254]]
  [1m[36mTagging Destroy (0.2ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 90]]
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 254]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.1ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 246]]
  [1m[36mVisit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 179]]
  [1m[36mTagging Load (0.1ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 246]]
  [1m[36mTagging Destroy (0.2ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 82]]
  [1m[36mShortenedUrl Destroy (0.1ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 246]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 247]]
  [1m[36mVisit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 180]]
  [1m[36mTagging Load (0.1ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 247]]
  [1m[36mTagging Destroy (0.2ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 85]]
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 247]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.1ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 248]]
  [1m[36mVisit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "visits" WHERE "visits"."id" = $1[0m  [["id", 181]]
  [1m[36mTagging Load (0.2ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 248]]
  [1m[36mTagging Destroy (0.2ms)[0m  [1m[31mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 88]]
  [1m[36mShortenedUrl Destroy (0.1ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 248]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 255]]
  [1m[36mTagging Load (0.1ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 255]]
  [1m[36mShortenedUrl Destroy (0.7ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 255]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.1ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 258]]
  [1m[36mTagging Load (0.2ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 258]]
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 258]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.2ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 256]]
  [1m[36mTagging Load (0.2ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 256]]
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 256]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 257]]
  [1m[36mTagging Load (0.3ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 257]]
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 257]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisit Load (0.1ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."short_url_id" = $1[0m  [["short_url_id", 259]]
  [1m[36mTagging Load (0.1ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."short_url_id" = $1[0m  [["short_url_id", 259]]
  [1m[36mShortenedUrl Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 259]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mTagging Load (0.8ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings"[0m
  [1m[36mTagTopic Load (0.8ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "shortened_urls" DISABLE TRIGGER ALL;ALTER TABLE "taggings" DISABLE TRIGGER ALL;ALTER TABLE "visits" DISABLE TRIGGER ALL;ALTER TABLE "tag_topics" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (19.6ms)[0m  [1m[35mTRUNCATE TABLE "users", "shortened_urls", "taggings", "visits", "tag_topics"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "shortened_urls" ENABLE TRIGGER ALL;ALTER TABLE "taggings" ENABLE TRIGGER ALL;ALTER TABLE "visits" ENABLE TRIGGER ALL;ALTER TABLE "tag_topics" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaa@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "premium") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "aaa@gmail.com"], ["created_at", "2020-09-01 06:05:05.044224"], ["updated_at", "2020-09-01 06:05:05.044224"], ["premium", true]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bbb@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bbb@gmail.com"], ["created_at", "2020-09-01 06:05:05.050368"], ["updated_at", "2020-09-01 06:05:05.050368"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ccc@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "ccc@gmail.com"], ["created_at", "2020-09-01 06:05:05.055393"], ["updated_at", "2020-09-01 06:05:05.055393"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "JUWLQUigcL6FxHYvINELwg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "JUWLQUigcL6FxHYvINELwg"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.071330"], ["created_at", "2020-09-01 06:05:05.071376"], ["user_id", 92]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.4ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 92], ["long_url", "11111111111111"], ["short_url", "JUWLQUigcL6FxHYvINELwg"], ["created_at", "2020-09-01 06:05:05.077847"], ["updated_at", "2020-09-01 06:05:05.077847"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "9tJgm3rBwbl2F93D-9Z0kw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "9tJgm3rBwbl2F93D-9Z0kw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.083478"], ["created_at", "2020-09-01 06:05:05.083525"], ["user_id", 92]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 92], ["long_url", "22222222222222"], ["short_url", "9tJgm3rBwbl2F93D-9Z0kw"], ["created_at", "2020-09-01 06:05:05.086598"], ["updated_at", "2020-09-01 06:05:05.086598"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sai9_8qXrs7NUCWCK3qWrA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "sai9_8qXrs7NUCWCK3qWrA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.097395"], ["created_at", "2020-09-01 06:05:05.097426"], ["user_id", 92]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 92], ["long_url", "33333333333333"], ["short_url", "sai9_8qXrs7NUCWCK3qWrA"], ["created_at", "2020-09-01 06:05:05.100158"], ["updated_at", "2020-09-01 06:05:05.100158"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "EOISXBESxccUKyBeII_N2Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "EOISXBESxccUKyBeII_N2Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.105515"], ["created_at", "2020-09-01 06:05:05.105547"], ["user_id", 93]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 93]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 93], ["long_url", "44444444444444"], ["short_url", "EOISXBESxccUKyBeII_N2Q"], ["created_at", "2020-09-01 06:05:05.109394"], ["updated_at", "2020-09-01 06:05:05.109394"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XWwggyX3m793ZTmZ8BscwQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XWwggyX3m793ZTmZ8BscwQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.114408"], ["created_at", "2020-09-01 06:05:05.114439"], ["user_id", 93]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 93]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 93], ["long_url", "55555555555555"], ["short_url", "XWwggyX3m793ZTmZ8BscwQ"], ["created_at", "2020-09-01 06:05:05.117983"], ["updated_at", "2020-09-01 06:05:05.117983"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HWILQqY0mEWkyRaY1sS2xw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "HWILQqY0mEWkyRaY1sS2xw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.122891"], ["created_at", "2020-09-01 06:05:05.122921"], ["user_id", 93]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 93]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 93], ["long_url", "66666666666666"], ["short_url", "HWILQqY0mEWkyRaY1sS2xw"], ["created_at", "2020-09-01 06:05:05.126767"], ["updated_at", "2020-09-01 06:05:05.126767"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "o_djvPbVspl0Qp2E9cXa7Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "o_djvPbVspl0Qp2E9cXa7Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.131636"], ["created_at", "2020-09-01 06:05:05.131666"], ["user_id", 94]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 94]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 94], ["long_url", "77777777777777"], ["short_url", "o_djvPbVspl0Qp2E9cXa7Q"], ["created_at", "2020-09-01 06:05:05.135398"], ["updated_at", "2020-09-01 06:05:05.135398"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YzI_ICdQk00IxDcDPQ7uHw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "YzI_ICdQk00IxDcDPQ7uHw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.140717"], ["created_at", "2020-09-01 06:05:05.140749"], ["user_id", 94]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 94]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.2ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 94], ["long_url", "88888888888888"], ["short_url", "YzI_ICdQk00IxDcDPQ7uHw"], ["created_at", "2020-09-01 06:05:05.144301"], ["updated_at", "2020-09-01 06:05:05.144301"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FHhkY0R9KnDhhj1dlFEvEQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "FHhkY0R9KnDhhj1dlFEvEQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.149538"], ["created_at", "2020-09-01 06:05:05.149568"], ["user_id", 94]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 94]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 94], ["long_url", "99999999999999"], ["short_url", "FHhkY0R9KnDhhj1dlFEvEQ"], ["created_at", "2020-09-01 06:05:05.153245"], ["updated_at", "2020-09-01 06:05:05.153245"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 263], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.4ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 92], ["short_url_id", 263], ["created_at", "2020-09-01 06:05:05.167340"], ["updated_at", "2020-09-01 06:05:05.167340"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 92], ["short_url_id", 264], ["created_at", "2020-09-01 06:05:05.173725"], ["updated_at", "2020-09-01 06:05:05.173725"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 92], ["short_url_id", 265], ["created_at", "2020-09-01 06:05:05.179267"], ["updated_at", "2020-09-01 06:05:05.179267"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 266], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 93], ["short_url_id", 266], ["created_at", "2020-09-01 06:05:05.184793"], ["updated_at", "2020-09-01 06:05:05.184793"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 267], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 93], ["short_url_id", 267], ["created_at", "2020-09-01 06:05:05.190106"], ["updated_at", "2020-09-01 06:05:05.190106"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 93], ["short_url_id", 268], ["created_at", "2020-09-01 06:05:05.199154"], ["updated_at", "2020-09-01 06:05:05.199154"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.3ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 94], ["short_url_id", 260], ["created_at", "2020-09-01 06:05:05.204880"], ["updated_at", "2020-09-01 06:05:05.204880"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 94], ["short_url_id", 261], ["created_at", "2020-09-01 06:05:05.210425"], ["updated_at", "2020-09-01 06:05:05.210425"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[36mVisit Create (0.2ms)[0m  [1m[32mINSERT INTO "visits" ("user_id", "short_url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 94], ["short_url_id", 262], ["created_at", "2020-09-01 06:05:05.215685"], ["updated_at", "2020-09-01 06:05:05.215685"]]
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/visit.rb:9:in `record_visit!'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "sports"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.5ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "news"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Create (0.3ms)[0m  [1m[32mINSERT INTO "tag_topics" ("topic") VALUES ($1) RETURNING "id"[0m  [["topic", "science"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 260], ["tag_topic_id", 31]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.4ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 263], ["LIMIT", 1]]
  [1m[36mTagging Create (0.4ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 263], ["tag_topic_id", 31]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 266], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 266], ["tag_topic_id", 31]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 261], ["tag_topic_id", 32]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 264], ["tag_topic_id", 32]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 267], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 267], ["tag_topic_id", 32]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 262], ["tag_topic_id", 33]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  [1m[36mTagging Create (0.3ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 265], ["tag_topic_id", 33]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Load (0.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" WHERE "tag_topics"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
  [1m[36mTagging Create (0.2ms)[0m  [1m[32mINSERT INTO "taggings" ("short_url_id", "tag_topic_id") VALUES ($1, $2) RETURNING "id"[0m  [["short_url_id", 268], ["tag_topic_id", 33]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "spam@spammer.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "spam@spammer.com"], ["created_at", "2020-09-01 06:05:05.327507"], ["updated_at", "2020-09-01 06:05:05.327507"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "M0wN5J5wQO6XEOUkN4a9oQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "M0wN5J5wQO6XEOUkN4a9oQ"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.334205"], ["created_at", "2020-09-01 06:05:05.334247"], ["user_id", 95]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 95]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 95], ["long_url", "lorem ipsum"], ["short_url", "M0wN5J5wQO6XEOUkN4a9oQ"], ["created_at", "2020-09-01 06:05:05.338727"], ["updated_at", "2020-09-01 06:05:05.338727"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "woPRnk3vGsgFiDOPCpBJMw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "woPRnk3vGsgFiDOPCpBJMw"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.345038"], ["created_at", "2020-09-01 06:05:05.345076"], ["user_id", 95]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 95]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 95], ["long_url", "notaspam.com"], ["short_url", "woPRnk3vGsgFiDOPCpBJMw"], ["created_at", "2020-09-01 06:05:05.349806"], ["updated_at", "2020-09-01 06:05:05.349806"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "gEbOiwADeWz4RnFihutSWA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "gEbOiwADeWz4RnFihutSWA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.356001"], ["created_at", "2020-09-01 06:05:05.356036"], ["user_id", 95]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 95]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 95], ["long_url", "sdjsldfjlskdfjl"], ["short_url", "gEbOiwADeWz4RnFihutSWA"], ["created_at", "2020-09-01 06:05:05.360248"], ["updated_at", "2020-09-01 06:05:05.360248"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3xr3g6BuecGYu-EpSIjzbA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "3xr3g6BuecGYu-EpSIjzbA"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.366150"], ["created_at", "2020-09-01 06:05:05.366186"], ["user_id", 95]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 95]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 95], ["long_url", "aaaaaaaaaaaadfdfdfd"], ["short_url", "3xr3g6BuecGYu-EpSIjzbA"], ["created_at", "2020-09-01 06:05:05.370612"], ["updated_at", "2020-09-01 06:05:05.370612"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8Pl4OVrsCD9-qAvIdzv51Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:45:in `block in random_code'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "8Pl4OVrsCD9-qAvIdzv51Q"], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."created_at" BETWEEN $1 AND $2 AND "shortened_urls"."user_id" = $3[0m  [["created_at", "2020-09-01 06:04:05.376846"], ["created_at", "2020-09-01 06:05:05.376884"], ["user_id", 95]]
  ↳ app/models/shortened_url.rb:72:in `no_spamming'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:78:in `nonpremium_max'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 95]]
  ↳ app/models/shortened_url.rb:82:in `nonpremium_max'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[36mShortenedUrl Create (0.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("user_id", "long_url", "short_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 95], ["long_url", "downloadfreeram.com"], ["short_url", "8Pl4OVrsCD9-qAvIdzv51Q"], ["created_at", "2020-09-01 06:05:05.381357"], ["updated_at", "2020-09-01 06:05:05.381357"]]
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/shortened_url.rb:53:in `create_shortened_url'
